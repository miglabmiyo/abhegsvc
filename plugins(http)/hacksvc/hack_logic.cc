#include "hack_logic.h"
#include "hack_init.h"
#include "logic/logic_unit.h"
#include "logic/logic_comm.h"
#include "dic/base_dic_redis_auto.h"
#include "common.h"
#include <string>
#include <sstream>


#define TIME_TEST_GET_WANDOUJIASUAMMRY    10001//消息检测
#define TIME_TEST_GET_SNSSDK              10002//消息检测
#define TIME_TEST_CHECK_SNSSDK            10003//
namespace hacksvc_logic{

Hacklogic*
Hacklogic::instance_=NULL;

Hacklogic::Hacklogic(){
   if(!Init())
      assert(0);
}

Hacklogic::~Hacklogic(){
	base_dic::RedisPool::Dest();
}

bool Hacklogic::Init(){
	wandoujia_appstore_connector_engine_ = hacksvc_logic::AppStoreConnector::Create(IMPL_WANDOUJIA);
	snsskd_connector_engine_ = hacksvc_logic::NewsConnector::Create(IMPL_SNSSDK);
	//配置文件
	bool r = false;
	std::string path = DEFAULT_CONFIG_PATH;
	config::FileConfig* config = config::FileConfig::GetFileConfig();
	if(config==NULL)
		return false;
	r = config->LoadConfig(path);
	base_dic::RedisPool::Init(config->redis_list_);

	snsskd_connector_engine_->Init(config->redis_list_);
    return true;
}

Hacklogic*
Hacklogic::GetInstance(){

    if(instance_==NULL)
        instance_ = new Hacklogic();

    return instance_;
}



void Hacklogic::FreeInstance(){
    delete instance_;
    instance_ = NULL;
}

bool Hacklogic::OnHackConnect(struct server *srv,const int socket){

    return true;
}



bool Hacklogic::OnHackMessage(struct server *srv, const int socket, const void *msg,const int len){
	const char* packet_stream = (char*)(msg);
	std::string http_str(packet_stream,len);
	std::string error_str;
	int error_code = 0;

	LOG_MSG2("%s",packet_stream);

	scoped_ptr<base_logic::ValueSerializer> serializer(base_logic::ValueSerializer::Create(base_logic::IMPL_HTTP,&http_str));


	netcomm_recv::NetBase*  value = (netcomm_recv::NetBase*)(serializer.get()->Deserialize(&error_code,&error_str));
	if(value==NULL){
		error_code = STRUCT_ERROR;
		//发送错误数据
		send_error(error_code,socket);
		return false;
	}
	scoped_ptr<netcomm_recv::HeadPacket> packet(new netcomm_recv::HeadPacket(value));
	int32 type = packet->GetType();
	switch(type){
		case HACK_WANDOUJIA_SUMMARY:
			OnHackWandoujiaSuammry(srv,socket,value);
			break;
		case HACK_SNSSDK_ARTICLE:
			OnHackSNSSDKArticel(srv,socket,value);
			break;
	}
    return true;
}

bool Hacklogic::OnHackClose(struct server *srv,const int socket){

    return true;
}



bool Hacklogic::OnBroadcastConnect(struct server *srv, const int socket, const void *msg,const int len){

    return true;
}

bool Hacklogic::OnBroadcastMessage(struct server *srv, const int socket, const void *msg,const int len){

    return true;
}



bool Hacklogic::OnBroadcastClose(struct server *srv, const int socket){

    return true;
}

bool Hacklogic::OnIniTimer(struct server *srv){
	srv->add_time_task(srv,"hack",TIME_TEST_GET_WANDOUJIASUAMMRY,2,-1);
	srv->add_time_task(srv,"hack",TIME_TEST_GET_SNSSDK,300,-1);
	srv->add_time_task(srv,"hack",TIME_TEST_CHECK_SNSSDK,2,-1);
    return true;
}



bool Hacklogic::OnTimeout(struct server *srv, char *id, int opcode, int time){

	switch(opcode){
		case TIME_TEST_GET_WANDOUJIASUAMMRY:
			OnQueueGetAppSummary();
			break;
		case TIME_TEST_GET_SNSSDK:
			snsskd_connector_engine_->OnRequestNews(TYPE_RECOMMEND);
			break;
		case TIME_TEST_CHECK_SNSSDK:
			snsskd_connector_engine_->OnTimeCheck();
			break;

	}

    return true;
}

bool Hacklogic::OnHackWandoujiaSuammry(struct server *srv,const int socket,netcomm_recv::NetBase* netbase,
    		const void* msg,const int len){
	//std::string message = "{\"ad\":false,\"adPosition\":null,\"adType\":null,\"alias\":\"Minik run\",\"apkObbs\":[],\"apks\":[{\"adsType\":\"EMBEDED\",\"beta\":false,\"brief\":null,\"bytes\":15409841,\"compatible\":1,\"creation\":1428770268000,\"dangerousPermissions\":null,\"developerId\":null,\"downloadUrl\":{\"aggrWeight\":100,\"market\":\"Google Play\",\"referUrl\":\"https://play.google.com/store/apps/details?hl=zh_CN&id=com.Kiarygames.Minikrun\",\"url\":\"http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"},\"downloadUrls\":[{\"aggrWeight\":100,\"market\":\"Google Play\",\"referUrl\":\"https://play.google.com/store/apps/details?hl=zh_CN&id=com.Kiarygames.Minikrun\",\"url\":\"http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"},{\"aggrWeight\":1,\"market\":\"360手机助手\",\"referUrl\":\"http://zhushou.360.cn/detail/index/soft_id/2836179\",\"url\":\"http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"}],\"featuresInfo\":1572866,\"gameSdkVersion\":null,\"gsfType\":2,\"id\":13589702,\"incompatibleDetail\":null,\"itemStatus\":\"SHOW\",\"langType\":null,\"language\":[],\"maxSdkVersion\":0,\"md5\":\"6bffebb283b319ee23949c571c97f985\",\"minSdkVersion\":14,\"official\":0,\"packageName\":\"com.doudizhu.mainhuanle\",\"paidType\":\"NONE\",\"permissionGroups\":\"照片/媒体/文件/WLAN 网络连接信息/设备 ID 和通话信息/其他\",\"permissionLevel\":\"NORMAL\",\"permissionStatement\":null,\"permissions\":[\"读取手机状态和身份\",\"修改或删除USB存储设备中的内容\",\"从互联网接收数据\",\"查看 Wi-Fi 状态\",\"查看网络状态\"],\"resolution\":[\"ldpi\",\"mdpi\",\"hdpi\",\"xhdpi\"],\"securityDetail\":[{\"failedInfo\":null,\"provider\":\"360\",\"status\":\"SAFE\"},{\"failedInfo\":null,\"provider\":\"tencent\",\"status\":\"SAFE\"},{\"failedInfo\":null,\"provider\":\"lbe\",\"status\":\"SAFE\"}],\"securityStatus\":\"SAFE\",\"signature\":\"6e53c3cf841507806d492d78742d9e55\",\"size\":\"14.7M\",\"superior\":0,\"targetSdkVersion\":21,\"verified\":1,\"versionCode\":22,\"versionName\":\"1.08\"}],\"appType\":null,\"award\":{\"authorDesc\":null,\"authorLink\":null,\"authorName\":null,\"banner\":null,\"blogImage\":null,\"blogLink\":null,\"blogTitle\":null,\"comment\":null,\"creation\":null,\"issue\":null,\"markdownComment\":null,\"modification\":null},\"banner\":null,\"broadTerms\":null,\"categories\":[],\"changelog\":null,\"commentsCount\":8,\"cooperator\":false,\"defaultVersionCode\":22,\"description\":\"《途游斗地主》，又名《途游单机斗地主》，在传统斗地主玩法的基础上，加入了全城语聊、经典比赛等新颖且丰富的玩法。无论联网多平台海量玩家对战、还是单机个人休闲，途游《途游斗地主》都会带给您不一样的极致体验！让您的休闲生活High起来！\",\"detailParam\":\"pos=m/games/index/detail/section/999978:198412830\",\"developer\":{\"email\":null,\"id\":0,\"intro\":null,\"name\":\"Kiary games\",\"urls\":null,\"verified\":null,\"website\":null,\"weibo\":null},\"dislikesCount\":1,\"downloadCount\":5916,\"downloadCountStr\":\"5916 \",\"editorComment\":null,\"exclusiveBadge\":0,\"extensionPacks\":[],\"extra\":{},\"game\":null,\"icons\":{\"px48\":\"http://img.wdjimg.com/mms/icon/v1/1/a6/993c171c5dd16ccd1c7c26fb48baba61_48_48.png\",\"px100\":\"http://img.wdjimg.com/mms/icon/v1/1/a6/993c171c5dd16ccd1c7c26fb48baba61_100_100.png\",\"px256\":\"http://img.wdjimg.com/mms/icon/v1/1/a6/993c171c5dd16ccd1c7c26fb48baba61_256_256.png\",\"px78\":\"http://img.wdjimg.com/mms/icon/v1/1/a6/993c171c5dd16ccd1c7c26fb48baba61_78_78.png\",\"px24\":\"http://img.wdjimg.com/mms/icon/v1/1/a6/993c171c5dd16ccd1c7c26fb48baba61_24_24.png\",\"px68\":\"http://img.wdjimg.com/mms/icon/v1/1/a6/993c171c5dd16ccd1c7c26fb48baba61_68_68.png\",\"px36\":\"http://img.wdjimg.com/mms/icon/v1/1/a6/993c171c5dd16ccd1c7c26fb48baba61_36_36.png\"},\"iconsStr\":\"993c171c5dd16ccd1c7c26fb48baba61#300#300#jpeg\",\"id\":3209168,\"imprUrl\":null,\"installedCount\":3813,\"installedCountStr\":\"3813 \",\"itemStatus\":1,\"latestApk\":{\"adsType\":\"EMBEDED\",\"beta\":false,\"brief\":null,\"bytes\":15409841,\"compatible\":null,\"creation\":1428770268000,\"dangerousPermissions\":null,\"developerId\":null,\"downloadUrl\":{\"aggrWeight\":100,\"market\":\"Google Play\",\"referUrl\":\"https://play.google.com/store/apps/details?hl=zh_CN&id=com.Kiarygames.Minikrun\",\"url\":\"http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"},\"downloadUrls\":[{\"aggrWeight\":100,\"market\":\"Google Play\",\"referUrl\":\"https://play.google.com/store/apps/details?hl=zh_CN&id=com.Kiarygames.Minikrun\",\"url\":\"http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"},{\"aggrWeight\":1,\"market\":\"360手机助手\",\"referUrl\":\"http://zhushou.360.cn/detail/index/soft_id/2836179\",\"url\":\"http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"}],\"featuresInfo\":1572866,\"gameSdkVersion\":null,\"gsfType\":2,\"id\":13589702,\"incompatibleDetail\":null,\"itemStatus\":\"SHOW\",\"langType\":null,\"language\":[],\"maxSdkVersion\":0,\"md5\":\"6bffebb283b319ee23949c571c97f985\",\"minSdkVersion\":14,\"official\":0,\"packageName\":\"com.doudizhu.mainhuanle\",\"paidType\":\"NONE\",\"permissionGroups\":\"照片/媒体/文件/WLAN 网络连接信息/设备 ID 和通话信息/其他\",\"permissionLevel\":\"NORMAL\",\"permissionStatement\":null,\"permissions\":[\"读取手机状态和身份\",\"修改或删除USB存储设备中的内容\",\"从互联网接收数据\",\"查看 Wi-Fi 状态\",\"查看网络状态\"],\"resolution\":[\"ldpi\",\"mdpi\",\"hdpi\",\"xhdpi\"],\"securityDetail\":[{\"failedInfo\":null,\"provider\":\"360\",\"status\":\"SAFE\"},{\"failedInfo\":null,\"provider\":\"tencent\",\"status\":\"SAFE\"},{\"failedInfo\":null,\"provider\":\"lbe\",\"status\":\"SAFE\"}],\"securityStatus\":\"SAFE\",\"signature\":\"6e53c3cf841507806d492d78742d9e55\",\"size\":\"14.7 M\",\"superior\":0,\"targetSdkVersion\":21,\"verified\":1,\"versionCode\":22,\"versionName\":\"1.08\"},\"likesCount\":2,\"likesRate\":67,\"negComments\":[],\"packageName\":\"com.doudizhu.mainhuanle\",\"posComments\":[],\"publishDate\":1428770264000,\"publishNoticeBean\":null,\"reputationScore\":0,\"screenshots\":{\"small\":[\"http://img.wdjimg.com/mms/screenshot/0/45/2e06be27fff1a43ba448985c6df8a450_355_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/5/dd/fd1584ed79a310954ac15e8cc4fe8dd5_355_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/6/e5/9b6b6d59c50db2a2862af7675b36ce56_355_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/e/7e/447c887edf2876b673ff5c04094487ee_355_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/a/5a/e5c3951fe34a1390aa784b10b98705aa_355_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/9/b2/aa0a7047542d0bb23363b90215138b29_355_200.jpeg\"],\"normal\":[\"http://img.wdjimg.com/mms/screenshot/0/45/2e06be27fff1a43ba448985c6df8a450_568_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/5/dd/fd1584ed79a310954ac15e8cc4fe8dd5_568_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/6/e5/9b6b6d59c50db2a2862af7675b36ce56_568_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/e/7e/447c887edf2876b673ff5c04094487ee_568_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/a/5a/e5c3951fe34a1390aa784b10b98705aa_568_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/9/b2/aa0a7047542d0bb23363b90215138b29_568_320.jpeg\"]},\"screenshotsStr\":\"2e06be27fff1a43ba448985c6df8a450#1600#900#jpeg,fd1584ed79a310954ac15e8cc4fe8dd5#1600#900#jpeg,9b6b6d59c50db2a2862af7675b36ce56#1600#900#jpeg,447c887edf2876b673ff5c04094487ee#1600#900#jpeg,e5c3951fe34a1390aa784b10b98705aa#1600#900#jpeg,aa0a7047542d0bb23363b90215138b29#1600#900#jpeg\",\"selectedExtensionPack\":0,\"snippet\":\"《途游斗地主》，又名《途游单机斗地主》，在传统斗地主玩法的基础上，加入了全城语聊、经典比赛等新颖且丰富的玩法。无论联网多平台海量玩家对战、还是单机个人休闲，途游《途游斗地主》都会带给您不一样的极致体验！让您的休闲生活High起来！\",\"stat\":{\"daily\":[{\"date\":1428768000000,\"downloadCount\":2,\"downloadCountStr\":\"2 \"},{\"date\":1428854400000,\"downloadCount\":1201,\"downloadCountStr\":\"1201 \"},{\"date\":1428940800000,\"downloadCount\":4713,\"downloadCountStr\":\"4713 \"}],\"total\":5916,\"totalStr\":\"5916 \",\"weekly\":5916,\"weeklyCommentsCount\":5,\"weeklyCommentsCountStr\":\"5 \",\"weeklyStr\":\"5916 \"},\"tagline\":null,\"tags\":[],\"title\":\"途游斗地主\",\"titleEn\":null,\"updatedDate\":null}";
	//std::string message = "{\"ad\":false,\"adPosition\":null,\"adType\":null,\"alias\":\"Hill Climb Racing\",\"apkObbs\":[],\"apks\":[{\"adsType\":\"NONE\",\"beta\":false,\"brief\":null,\"bytes\":27076638,\"compatible\":1,\"creation\":1428374717000,\"dangerousPermissions\":[\"发送短信（此操作可能需要付费）\",\"访问联系人数据\"],\"developerId\":null,\"downloadUrl\":{\"aggrWeight\":300,\"market\":\"官方\",\"referUrl\":\"http://apps.wandoujia.com/apps/com.fingersoft.hillclimb?uid=77120723\",\"url\":\"http://121.40.191.137/4.php?signature=5a97813&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2836.apk&pn=com.fingersoft.hillclimb&md5=0693ae6419ed5e1f9a673cadc53c5399&apkid=13453980&vc=55&size=27076638&pos=m/games/index/detail/section/0:198412830&udid=5b1fff6e5dac4e49a9bf2b7faef2616a117ddaa0&tokenId=wandoujia_android&appType=GAME\"},\"downloadUrls\":[{\"aggrWeight\":300,\"market\":\"官方\",\"referUrl\":\"http://apps.wandoujia.com/apps/com.fingersoft.hillclimb?uid=77120723\",\"url\":\"http://121.40.191.137/4.php?signature=5a97813&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2836.apk&pn=com.fingersoft.hillclimb&md5=0693ae6419ed5e1f9a673cadc53c5399&apkid=13453980&vc=55&size=27076638&pos=m/games/index/detail/section/0:198412830&udid=5b1fff6e5dac4e49a9bf2b7faef2616a117ddaa0&tokenId=wandoujia_android&appType=GAME\"}],\"featuresInfo\":12885951618,\"gameSdkVersion\":null,\"gsfType\":0,\"id\":13453980,\"incompatibleDetail\":null,\"itemStatus\":\"SHOW\",\"langType\":null,\"language\":[],\"maxSdkVersion\":0,\"md5\":\"0693ae6419ed5e1f9a673cadc53c5399\",\"minSdkVersion\":8,\"official\":1,\"packageName\":\"com.fingersoft.hillclimb\",\"paidType\":\"NONE\",\"permissionGroups\":\"通讯录/短信/照片/媒体/文件/相机/麦克风/WLAN 网络连接信息/设备 ID 和通话信息/其他\",\"permissionLevel\":\"TRUSTED\",\"permissionStatement\":\"运营商短代计费\",\"permissions\":[\"显示系统级警报\",\"修改或删除USB存储设备中的内容\",\"读取手机状态和身份\",\"停用键盘锁\",\"从互联网接收数据\",\"查看 Wi-Fi 状态\",\"拍照\",\"发送短信（此操作可能需要付费）\",\"查看网络状态\",\"装载和卸载文件系统\",\"访问联系人数据\"],\"resolution\":[\"ldpi\",\"mdpi\",\"hdpi\"],\"securityDetail\":[{\"failedInfo\":null,\"provider\":\"tencent\",\"status\":\"UNKNOWN\"}],\"securityStatus\":\"UNKNOWN\",\"signature\":\"6a4560508bcb2dae57866405fd7642b6\",\"size\":\"25.82M\",\"superior\":1,\"targetSdkVersion\":16,\"verified\":2,\"versionCode\":55,\"versionName\":\"1.25.6\"}],\"appType\":\"GAME\",\"award\":{\"authorDesc\":null,\"authorLink\":null,\"authorName\":null,\"banner\":null,\"blogImage\":null,\"blogLink\":null,\"blogTitle\":null,\"comment\":null,\"creation\":null,\"issue\":null,\"markdownComment\":null,\"modification\":null},\"banner\":\"http://img.wdjimg.com/mms/banner/0/a6/3357d0df7ccac0c3576d031955402a60_320_250.jpeg\",\"broadTerms\":null,\"categories\":[{\"alias\":\"parkour\",\"level\":1,\"name\":\"跑酷竞速\",\"type\":\"GAME\"},{\"alias\":\"casual\",\"level\":1,\"name\":\"休闲时间\",\"type\":\"GAME\"},{\"alias\":null,\"level\":2,\"name\":\"赛车\",\"type\":\"GAME\"},{\"alias\":null,\"level\":2,\"name\":\"益智\",\"type\":\"GAME\"}],\"changelog\":\"最新官方中文版V1.25.6/7 新增一个核电站地图和一辆迷你机车，带来更新更刺激的游戏体验。\",\"commentsCount\":616,\"cooperator\":false,\"defaultVersionCode\":55,\"description\":\"《登山赛车》是一款风靡全球的趣味驾车游戏，下载量已超2亿。以真实物理特性为操作基础，丰富的关卡场景和功能各异的车型，不仅增加了游戏的耐玩性，还能让玩家淋漓尽致地体验绝妙的驾驶乐趣。玩家可以对爱车的引擎、悬挂、轮胎及四驱系统进行升级，引擎升级时还能听到逼真的轰鸣音效。\",\"detailParam\":\"pos=m/games/index/detail/section/0:198412830\",\"developer\":{\"email\":\"support@fingersoft.net\",\"id\":77120723,\"intro\":null,\"name\":\"北京唯我乐园信息技术有限公司\",\"urls\":null,\"verified\":null,\"website\":\"http://www.fingersoft.net\",\"weibo\":null},\"dislikesCount\":109,\"downloadCount\":729311,\"downloadCountStr\":\"73 万\",\"editorComment\":\"一款涵盖基础物理设计的赛车竞速类游戏，挑战各种奇特的爬坡环境，通过大胆的动作来赢得奖励。\",\"exclusiveBadge\":0,\"extensionPacks\":[],\"extra\":{\"appOperatorRemark\":{\"editorName\":\"admin\",\"updateDate\":\"Oct 25, 2014 5:01:28 PM\",\"editorUid\":0,\"backgroundImage\":\"http://img.wdjimg.com/static-files/auv/banners/blue.jpg\",\"packageName\":\"com.fingersoft.hillclimb\",\"commentContent\":\"\",\"useComment\":false}},\"game\":null,\"icons\":{\"px48\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_48_48.png\",\"px100\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_100_100.png\",\"px256\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_256_256.png\",\"px78\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_78_78.png\",\"px24\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_24_24.png\",\"px68\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_68_68.png\",\"px36\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_36_36.png\"},\"iconsStr\":\"8c63e36d71d90c6ec9b1c3ab41a51d0d#512#512#png\",\"id\":401722,\"imprUrl\":null,\"installedCount\":2440993,\"installedCountStr\":\"244 万\",\"itemStatus\":1,\"latestApk\":{\"adsType\":\"BOTH\",\"beta\":false,\"brief\":null,\"bytes\":6990160,\"compatible\":null,\"creation\":1365157832000,\"dangerousPermissions\":[\"监听新安装应用\"],\"developerId\":null,\"downloadUrl\":{\"aggrWeight\":1,\"market\":\"百度手机助手\",\"referUrl\":\"http://shouji.baidu.com/soft/item?docid=1530498\",\"url\":\"http://121.40.191.137/4.php?signature=f467472&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2836.apk&pn=com.fingersoft.hillclimb&md5=1ac6d3c4cd0526491fc1431b2f6a951a&apkid=1931922&vc=15300000&size=6990160\"},\"downloadUrls\":[{\"aggrWeight\":1,\"market\":\"百度手机助手\",\"referUrl\":\"http://shouji.baidu.com/soft/item?docid=1530498\",\"url\":\"http://121.40.191.137/4.php?signature=f467472&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2836.apk&pn=com.fingersoft.hillclimb&md5=1ac6d3c4cd0526491fc1431b2f6a951a&apkid=1931922&vc=15300000&size=6990160\"}],\"featuresInfo\":59244674,\"gameSdkVersion\":null,\"gsfType\":null,\"id\":1931922,\"incompatibleDetail\":null,\"itemStatus\":\"SHOW\",\"langType\":null,\"language\":[],\"maxSdkVersion\":0,\"md5\":\"1ac6d3c4cd0526491fc1431b2f6a951a\",\"minSdkVersion\":8,\"official\":0,\"packageName\":\"com.fingersoft.hillclimb\",\"paidType\":\"NONE\",\"permissionGroups\":\"安装应用/设备和应用历史记录/移动数据网络设置/位置信息/照片/媒体/文件/WLAN 网络连接信息/设备 ID 和通话信息/其他\",\"permissionLevel\":\"DANGEROUS\",\"permissionStatement\":null,\"permissions\":[\"显示系统级警报\",\"从互联网接收数据\",\"控制振动器\",\"查看 Wi-Fi 状态\",\"写入主屏幕设置和快捷方式\",\"读取主屏幕设置和快捷方式\",\"安装快捷方式\",\"监听新安装应用\",\"装载和卸载文件系统\",\"检索当前运行的应用程序\",\"修改或删除USB存储设备中的内容\",\"读取手机状态和身份\",\"读取精准的 GPS 位置\",\"读取基于网络的粗略位置\",\"更改 Wi-Fi 状态\",\"查看网络状态\",\"防止手机休眠\"],\"resolution\":[\"ldpi\",\"mdpi\",\"hdpi\"],\"securityDetail\":[{\"failedInfo\":null,\"provider\":\"360\",\"status\":\"SAFE\"},{\"failedInfo\":null,\"provider\":\"tencent\",\"status\":\"UNKNOWN\"},{\"failedInfo\":null,\"provider\":\"lbe\",\"status\":\"SAFE\"}],\"securityStatus\":\"SAFE\",\"signature\":\"ff2bab86adc4b5ed2ac77efd2c9a9996\",\"size\":\"6.67M\",\"superior\":0,\"targetSdkVersion\":16,\"verified\":0,\"versionCode\":15300000,\"versionName\":\"1.5.3\"},\"likesCount\":358,\"likesRate\":77,\"negComments\":[{\"authorName\":\"艾你的**\",\"comment\":\"差点憋出内伤,╰_╯╬。\",\"id\":8345413,\"uid\":30503513}],\"packageName\":\"com.fingersoft.hillclimb\",\"posComments\":[{\"authorName\":\"歃血龙族\",\"comment\":\"很不错。车都解锁了。很好玩的游戏,用的是八门神器解锁了…\",\"id\":6066733,\"uid\":2774973}],\"publishDate\":1348722355000,\"publishNoticeBean\":null,\"reputationScore\":78,\"screenshots\":{\"small\":[\"http://img.wdjimg.com/mms/screenshot/d/63/75a4de3cae78af2cc6e0766b440d463d_333_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/3/f8/21381be8fd6bed71a77a3c13e2907f83_333_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/a/f8/70c1f479b741a60ff38bcbedbb7a2f8a_333_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/b/2b/d1d7169a45488297c5a3228608c6d2bb_333_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/2/c1/208580c96aa225e5ae8762a9df145c12_333_200.jpeg\"],\"normal\":[\"http://img.wdjimg.com/mms/screenshot/d/63/75a4de3cae78af2cc6e0766b440d463d_533_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/3/f8/21381be8fd6bed71a77a3c13e2907f83_533_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/a/f8/70c1f479b741a60ff38bcbedbb7a2f8a_533_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/b/2b/d1d7169a45488297c5a3228608c6d2bb_533_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/2/c1/208580c96aa225e5ae8762a9df145c12_533_320.jpeg\"]},\"screenshotsStr\":\"75a4de3cae78af2cc6e0766b440d463d#800#480#jpeg,21381be8fd6bed71a77a3c13e2907f83#800#480#jpeg,70c1f479b741a60ff38bcbedbb7a2f8a#800#480#jpeg,d1d7169a45488297c5a3228608c6d2bb#800#480#jpeg,208580c96aa225e5ae8762a9df145c12#800#480#jpeg\",\"selectedExtensionPack\":0,\"snippet\":\"《登山赛车》是一款风靡全球的趣味驾车游戏，下载量已超2亿。以真实物理特性为操作基础，丰富的关卡场景和功能各异的车型，不仅增加了游戏的耐玩性，还能让玩家淋漓尽致地体验绝妙的驾驶乐趣。玩家可以对爱车的引擎、悬挂、轮胎及四驱系统进行升级，引擎升级时还能听到逼真的轰鸣音效。\",\"stat\":{\"daily\":[{\"date\":1428422400000,\"downloadCount\":1046,\"downloadCountStr\":\"1046 \"},{\"date\":1428508800000,\"downloadCount\":1096,\"downloadCountStr\":\"1096 \"},{\"date\":1428595200000,\"downloadCount\":4614,\"downloadCountStr\":\"4614 \"},{\"date\":1428681600000,\"downloadCount\":7291,\"downloadCountStr\":\"7291 \"},{\"date\":1428768000000,\"downloadCount\":7748,\"downloadCountStr\":\"7748 \"},{\"date\":1428854400000,\"downloadCount\":4739,\"downloadCountStr\":\"4739 \"},{\"date\":1428940800000,\"downloadCount\":4827,\"downloadCountStr\":\"4827 \"}],\"total\":729311,\"totalStr\":\"73 万\",\"weekly\":31361,\"weeklyCommentsCount\":18,\"weeklyCommentsCountStr\":\"18 \",\"weeklyStr\":\"3.1 万\"},\"tagline\":\"上手容易\",\"tags\":[{\"tag\":\"跑酷竞速\",\"weight\":2},{\"tag\":\"休闲时间\",\"weight\":2},{\"tag\":\"赛车\",\"weight\":2},{\"tag\":\"益智\",\"weight\":2},{\"tag\":\"跑酷\",\"weight\":0},{\"tag\":\"卡通\",\"weight\":0},{\"tag\":\"竞速\",\"weight\":0},{\"tag\":\"联运\",\"weight\":0},{\"tag\":\"物理\",\"weight\":0},{\"tag\":\"体育竞速\",\"weight\":0},{\"tag\":\"追求\",\"weight\":0},{\"tag\":\"好玩的\",\"weight\":0},{\"tag\":\"休闲益智\",\"weight\":0},{\"tag\":\"上瘾\",\"weight\":0}],\"title\":\"登山赛车\",\"titleEn\":null,\"updatedDate\":1428631277000}";
	//std::string message = "{\"ad\":false,\"adPosition\":null,\"adType\":null,\"alias\":\"Hill Climb Racing\",\"apkObbs\":[],\"apks\":[{\"adsType\":\"NONE\",\"beta\":false,\"brief\":null,\"bytes\":15409841,\"compatible\":1,\"creation\":1428374717000,\"dangerousPermissions\":[\"发送短信（此操作可能需要付费）\",\"访问联系人数据\"],\"developerId\":null,\"downloadUrl\":{\"aggrWeight\":300,\"market\":\"官方\",\"referUrl\":\"http://apps.wandoujia.com/apps/com.fingersoft.hillclimb?uid=77120723\",\"url\":\"http://121.40.191.137/4.php?signature=5a97813&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2836.apk&pn=com.fingersoft.hillclimb&md5=0693ae6419ed5e1f9a673cadc53c5399&apkid=13453980&vc=55&size=27076638&pos=m/games/index/detail/section/0:198412830&udid=5b1fff6e5dac4e49a9bf2b7faef2616a117ddaa0&tokenId=wandoujia_android&appType=GAME\"},\"downloadUrls\":[{\"aggrWeight\":300,\"market\":\"官方\",\"referUrl\":\"http://apps.wandoujia.com/apps/com.fingersoft.hillclimb?uid=77120723\",\"url\":\"http://121.40.191.137/4.php?signature=5a97813&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2836.apk&pn=com.fingersoft.hillclimb&md5=0693ae6419ed5e1f9a673cadc53c5399&apkid=13453980&vc=55&size=27076638&pos=m/games/index/detail/section/0:198412830&udid=5b1fff6e5dac4e49a9bf2b7faef2616a117ddaa0&tokenId=wandoujia_android&appType=GAME\"}],\"featuresInfo\":12885951618,\"gameSdkVersion\":null,\"gsfType\":0,\"id\":13453980,\"incompatibleDetail\":null,\"itemStatus\":\"SHOW\",\"langType\":null,\"language\":[],\"maxSdkVersion\":0,\"md5\":\"6bffebb283b319ee23949c571c97f985\",\"minSdkVersion\":8,\"official\":1,\"packageName\":\"com.doudizhu.mainhuanle\",\"paidType\":\"NONE\",\"permissionGroups\":\"通讯录/短信/照片/媒体/文件/相机/麦克风/WLAN 网络连接信息/设备 ID 和通话信息/其他\",\"permissionLevel\":\"TRUSTED\",\"permissionStatement\":\"运营商短代计费\",\"permissions\":[\"显示系统级警报\",\"修改或删除USB存储设备中的内容\",\"读取手机状态和身份\",\"停用键盘锁\",\"从互联网接收数据\",\"查看 Wi-Fi 状态\",\"拍照\",\"发送短信（此操作可能需要付费）\",\"查看网络状态\",\"装载和卸载文件系统\",\"访问联系人数据\"],\"resolution\":[\"ldpi\",\"mdpi\",\"hdpi\"],\"securityDetail\":[{\"failedInfo\":null,\"provider\":\"tencent\",\"status\":\"UNKNOWN\"}],\"securityStatus\":\"UNKNOWN\",\"signature\":\"6a4560508bcb2dae57866405fd7642b6\",\"size\":\"25.82M\",\"superior\":1,\"targetSdkVersion\":16,\"verified\":2,\"versionCode\":55,\"versionName\":\"1.25.6\"}],\"appType\":\"GAME\",\"award\":{\"authorDesc\":null,\"authorLink\":null,\"authorName\":null,\"banner\":null,\"blogImage\":null,\"blogLink\":null,\"blogTitle\":null,\"comment\":null,\"creation\":null,\"issue\":null,\"markdownComment\":null,\"modification\":null},\"banner\":\"http://img.wdjimg.com/mms/banner/0/a6/3357d0df7ccac0c3576d031955402a60_320_250.jpeg\",\"broadTerms\":null,\"categories\":[{\"alias\":\"parkour\",\"level\":1,\"name\":\"跑酷竞速\",\"type\":\"GAME\"},{\"alias\":\"casual\",\"level\":1,\"name\":\"休闲时间\",\"type\":\"GAME\"},{\"alias\":null,\"level\":2,\"name\":\"赛车\",\"type\":\"GAME\"},{\"alias\":null,\"level\":2,\"name\":\"益智\",\"type\":\"GAME\"}],\"changelog\":\"最新官方中文版V1.25.6/7 新增一个核电站地图和一辆迷你机车，带来更新更刺激的游戏体验。\",\"commentsCount\":616,\"cooperator\":false,\"defaultVersionCode\":55,\"description\":\"《登山赛车》是一款风靡全球的趣味驾车游戏，下载量已超2亿。以真实物理特性为操作基础，丰富的关卡场景和功能各异的车型，不仅增加了游戏的耐玩性，还能让玩家淋漓尽致地体验绝妙的驾驶乐趣。玩家可以对爱车的引擎、悬挂、轮胎及四驱系统进行升级，引擎升级时还能听到逼真的轰鸣音效。\",\"detailParam\":\"pos=m/games/index/detail/section/0:198412830\",\"developer\":{\"email\":\"support@fingersoft.net\",\"id\":77120723,\"intro\":null,\"name\":\"北京唯我乐园信息技术有限公司\",\"urls\":null,\"verified\":null,\"website\":\"http://www.fingersoft.net\",\"weibo\":null},\"dislikesCount\":109,\"downloadCount\":729311,\"downloadCountStr\":\"73 万\",\"editorComment\":\"一款涵盖基础物理设计的赛车竞速类游戏，挑战各种奇特的爬坡环境，通过大胆的动作来赢得奖励。\",\"exclusiveBadge\":0,\"extensionPacks\":[],\"extra\":{\"appOperatorRemark\":{\"editorName\":\"admin\",\"updateDate\":\"Oct 25, 2014 5:01:28 PM\",\"editorUid\":0,\"backgroundImage\":\"http://img.wdjimg.com/static-files/auv/banners/blue.jpg\",\"packageName\":\"com.fingersoft.hillclimb\",\"commentContent\":\"\",\"useComment\":false}},\"game\":null,\"icons\":{\"px48\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_48_48.png\",\"px100\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_100_100.png\",\"px256\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_256_256.png\",\"px78\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_78_78.png\",\"px24\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_24_24.png\",\"px68\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_68_68.png\",\"px36\":\"http://img.wdjimg.com/mms/icon/v1/d/d0/8c63e36d71d90c6ec9b1c3ab41a51d0d_36_36.png\"},\"iconsStr\":\"8c63e36d71d90c6ec9b1c3ab41a51d0d#512#512#png\",\"id\":401722,\"imprUrl\":null,\"installedCount\":2440993,\"installedCountStr\":\"244 万\",\"itemStatus\":1,\"latestApk\":{\"adsType\":\"BOTH\",\"beta\":false,\"brief\":null,\"bytes\":15409841,\"compatible\":null,\"creation\":1365157832000,\"dangerousPermissions\":[\"监听新安装应用\"],\"developerId\":null,\"downloadUrl\":{\"aggrWeight\":1,\"market\":\"百度手机助手\",\"referUrl\":\"http://shouji.baidu.com/soft/item?docid=1530498\",\"url\":\"http://121.40.191.137/4.php?signature=f467472&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2836.apk&pn=com.fingersoft.hillclimb&md5=1ac6d3c4cd0526491fc1431b2f6a951a&apkid=1931922&vc=15300000&size=6990160\"},\"downloadUrls\":[{\"aggrWeight\":1,\"market\":\"百度手机助手\",\"referUrl\":\"http://shouji.baidu.com/soft/item?docid=1530498\",\"url\":\"http://121.40.191.137/4.php?signature=f467472&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2836.apk&pn=com.fingersoft.hillclimb&md5=1ac6d3c4cd0526491fc1431b2f6a951a&apkid=1931922&vc=15300000&size=6990160\"}],\"featuresInfo\":59244674,\"gameSdkVersion\":null,\"gsfType\":null,\"id\":1931922,\"incompatibleDetail\":null,\"itemStatus\":\"SHOW\",\"langType\":null,\"language\":[],\"maxSdkVersion\":0,\"md5\":\"6bffebb283b319ee23949c571c97f985\",\"minSdkVersion\":8,\"official\":0,\"packageName\":\"com.doudizhu.mainhuanle\",\"paidType\":\"NONE\",\"permissionGroups\":\"安装应用/设备和应用历史记录/移动数据网络设置/位置信息/照片/媒体/文件/WLAN 网络连接信息/设备 ID 和通话信息/其他\",\"permissionLevel\":\"DANGEROUS\",\"permissionStatement\":null,\"permissions\":[\"显示系统级警报\",\"从互联网接收数据\",\"控制振动器\",\"查看 Wi-Fi 状态\",\"写入主屏幕设置和快捷方式\",\"读取主屏幕设置和快捷方式\",\"安装快捷方式\",\"监听新安装应用\",\"装载和卸载文件系统\",\"检索当前运行的应用程序\",\"修改或删除USB存储设备中的内容\",\"读取手机状态和身份\",\"读取精准的 GPS 位置\",\"读取基于网络的粗略位置\",\"更改 Wi-Fi 状态\",\"查看网络状态\",\"防止手机休眠\"],\"resolution\":[\"ldpi\",\"mdpi\",\"hdpi\"],\"securityDetail\":[{\"failedInfo\":null,\"provider\":\"360\",\"status\":\"SAFE\"},{\"failedInfo\":null,\"provider\":\"tencent\",\"status\":\"UNKNOWN\"},{\"failedInfo\":null,\"provider\":\"lbe\",\"status\":\"SAFE\"}],\"securityStatus\":\"SAFE\",\"signature\":\"ff2bab86adc4b5ed2ac77efd2c9a9996\",\"size\":\"6.67M\",\"superior\":0,\"targetSdkVersion\":16,\"verified\":0,\"versionCode\":15300000,\"versionName\":\"1.5.3\"},\"likesCount\":358,\"likesRate\":77,\"negComments\":[{\"authorName\":\"艾你的**\",\"comment\":\"差点憋出内伤,╰_╯╬。\",\"id\":8345413,\"uid\":30503513}],\"packageName\":\"com.doudizhu.mainhuanle\",\"posComments\":[{\"authorName\":\"歃血龙族\",\"comment\":\"很不错。车都解锁了。很好玩的游戏,用的是八门神器解锁了…\",\"id\":6066733,\"uid\":2774973}],\"publishDate\":1348722355000,\"publishNoticeBean\":null,\"reputationScore\":78,\"screenshots\":{\"small\":[\"http://img.wdjimg.com/mms/screenshot/d/63/75a4de3cae78af2cc6e0766b440d463d_333_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/3/f8/21381be8fd6bed71a77a3c13e2907f83_333_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/a/f8/70c1f479b741a60ff38bcbedbb7a2f8a_333_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/b/2b/d1d7169a45488297c5a3228608c6d2bb_333_200.jpeg\",\"http://img.wdjimg.com/mms/screenshot/2/c1/208580c96aa225e5ae8762a9df145c12_333_200.jpeg\"],\"normal\":[\"http://img.wdjimg.com/mms/screenshot/d/63/75a4de3cae78af2cc6e0766b440d463d_533_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/3/f8/21381be8fd6bed71a77a3c13e2907f83_533_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/a/f8/70c1f479b741a60ff38bcbedbb7a2f8a_533_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/b/2b/d1d7169a45488297c5a3228608c6d2bb_533_320.jpeg\",\"http://img.wdjimg.com/mms/screenshot/2/c1/208580c96aa225e5ae8762a9df145c12_533_320.jpeg\"]},\"screenshotsStr\":\"75a4de3cae78af2cc6e0766b440d463d#800#480#jpeg,21381be8fd6bed71a77a3c13e2907f83#800#480#jpeg,70c1f479b741a60ff38bcbedbb7a2f8a#800#480#jpeg,d1d7169a45488297c5a3228608c6d2bb#800#480#jpeg,208580c96aa225e5ae8762a9df145c12#800#480#jpeg\",\"selectedExtensionPack\":0,\"snippet\":\"《登山赛车》是一款风靡全球的趣味驾车游戏，下载量已超2亿。以真实物理特性为操作基础，丰富的关卡场景和功能各异的车型，不仅增加了游戏的耐玩性，还能让玩家淋漓尽致地体验绝妙的驾驶乐趣。玩家可以对爱车的引擎、悬挂、轮胎及四驱系统进行升级，引擎升级时还能听到逼真的轰鸣音效。\",\"stat\":{\"daily\":[{\"date\":1428422400000,\"downloadCount\":1046,\"downloadCountStr\":\"1046 \"},{\"date\":1428508800000,\"downloadCount\":1096,\"downloadCountStr\":\"1096 \"},{\"date\":1428595200000,\"downloadCount\":4614,\"downloadCountStr\":\"4614 \"},{\"date\":1428681600000,\"downloadCount\":7291,\"downloadCountStr\":\"7291 \"},{\"date\":1428768000000,\"downloadCount\":7748,\"downloadCountStr\":\"7748 \"},{\"date\":1428854400000,\"downloadCount\":4739,\"downloadCountStr\":\"4739 \"},{\"date\":1428940800000,\"downloadCount\":4827,\"downloadCountStr\":\"4827 \"}],\"total\":729311,\"totalStr\":\"73 万\",\"weekly\":31361,\"weeklyCommentsCount\":18,\"weeklyCommentsCountStr\":\"18 \",\"weeklyStr\":\"3.1 万\"},\"tagline\":\"上手容易\",\"tags\":[{\"tag\":\"跑酷竞速\",\"weight\":2},{\"tag\":\"休闲时间\",\"weight\":2},{\"tag\":\"赛车\",\"weight\":2},{\"tag\":\"益智\",\"weight\":2},{\"tag\":\"跑酷\",\"weight\":0},{\"tag\":\"卡通\",\"weight\":0},{\"tag\":\"竞速\",\"weight\":0},{\"tag\":\"联运\",\"weight\":0},{\"tag\":\"物理\",\"weight\":0},{\"tag\":\"体育竞速\",\"weight\":0},{\"tag\":\"追求\",\"weight\":0},{\"tag\":\"好玩的\",\"weight\":0},{\"tag\":\"休闲益智\",\"weight\":0},{\"tag\":\"上瘾\",\"weight\":0}],\"title\":\"登山赛车\",\"titleEn\":null,\"updatedDate\":1428631277000}";


	//std::string message = "{\"ad\":false,\"adPosition\":null,\"adType\":null,\"alias\":\"\",\"apkObbs\":[],\"apks\":[{\"adsType\":\"NONE\",\"beta\":false,\"brief\":null,\"bytes\":15409841,\"compatible\":1,\"creation\":1427970464000,\"dangerousPermissions\":[\"发送短信（此操作可能需要付费）\",\"读取短信或彩信\",\"访问联系人数据\"],\"developerId\":null,\"downloadUrl\":{\"aggrWeight\":300,\"market\":\"官方\",\"referUrl\":\"http://apps.wandoujia.com/apps/com.cmge.xianjian.wdj?uid=70045767\",\"url\":\"http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"},\"downloadUrls\":[{\"aggrWeight\":300,\"market\":\"官方\",\"referUrl\":\"http://apps.wandoujia.com/apps/com.cmge.xianjian.wdj?uid=70045767\",\"url\":\"http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"}],\"featuresInfo\":787586,\"gameSdkVersion\":null,\"gsfType\":0,\"id\":13378544,\"incompatibleDetail\":null,\"itemStatus\":\"SHOW\",\"langType\":null,\"language\":[],\"maxSdkVersion\":0,\"md5\":\"6e53c3cf841507806d492d78742d9e55\",\"minSdkVersion\":8,\"official\":1,\"packageName\":\"com.doudizhu.mainhuanle\",\"paidType\":\"NONE\",\"permissionGroups\":\"通讯录/短信/设备和应用历史记录/身份/照片/媒体/文件/WLAN 网络连接信息/设备 ID 和通话信息/其他\",\"permissionLevel\":\"TRUSTED\",\"permissionStatement\":\"短信用于验证码，通讯录用于邀请好友。\",\"permissions\":[\"显示系统级警报\",\"读取USB存储设备（例如：SD卡）中的内容\",\"查找设备上的帐户\",\"从互联网接收数据\",\"控制振动器\",\"查看 Wi-Fi 状态\",\"添加或移除帐户\",\"读取短信或彩信\",\"下载文件而不显示通知\",\"检索当前运行的应用程序\",\"访问联系人数据\",\"修改或删除USB存储设备中的内容\",\"读取手机状态和身份\",\"发送短信（此操作可能需要付费）\",\"创建帐户并设置密码\",\"修改全局系统设置\",\"查看网络状态\",\"防止手机休眠\"],\"resolution\":[\"ldpi\",\"mdpi\",\"hdpi\"],\"securityDetail\":[{\"failedInfo\":null,\"provider\":\"tencent\",\"status\":\"SAFE\"}],\"securityStatus\":\"SAFE\",\"signature\":\"5e78932d2878f6788d866294ed6ac491\",\"size\":\"14.7M\",\"superior\":1,\"targetSdkVersion\":16,\"verified\":2,\"versionCode\":1,\"versionName\":\"1.0.3\"}],\"appType\":\"GAME\",\"award\":{\"authorDesc\":null,\"authorLink\":null,\"authorName\":null,\"banner\":null,\"blogImage\":null,\"blogLink\":null,\"blogTitle\":null,\"comment\":null,\"creation\":null,\"issue\":null,\"markdownComment\":null,\"modification\":null},\"banner\":null,\"broadTerms\":null,\"categories\":[{\"alias\":\"ol\",\"level\":1,\"name\":\"网络游戏\",\"type\":\"GAME\"},{\"alias\":\"rpg\",\"level\":1,\"name\":\"角色扮演\",\"type\":\"GAME\"},{\"alias\":null,\"level\":2,\"name\":\"武侠\",\"type\":\"GAME\"}],\"changelog\":\"无\",\"commentsCount\":461,\"cooperator\":false,\"defaultVersionCode\":1,\"description\":\"中国手游和大宇联合研发的《新仙剑奇侠传》3D重制版震撼来袭！永恒仙侠经典，全新精彩体验。李逍遥、赵灵儿、林月如等耳熟能详的角色悉数登场。仙剑系列御用配音团队倾情献声。超萌Q版3D，全程语音对白，100%原味呈现二十年爱恨情愁经典剧情。经典回合战斗、守护灵兽全程助阵。五灵炼化、剑灵锻造、御剑飞行，更有百种绝技助你仗剑江湖为红颜。新仙剑，给您新的感动。\",\"detailParam\":\"pos=m/games/index/detail/section/999978:198412400\",\"developer\":{\"email\":null,\"id\":70045767,\"intro\":null,\"name\":\"天津随悦科技有限公司\",\"urls\":null,\"verified\":null,\"website\":null,\"weibo\":null},\"dislikesCount\":68,\"downloadCount\":431039,\"downloadCountStr\":\"43 万\",\"editorComment\":\"3D官方正版手游，全程【光合积木】御用配音，百余【仙剑人物】回归，创新3D战斗【御剑飞行】。二十年仙剑情缘，感动从“新”开始！\",\"exclusiveBadge\":0,\"extensionPacks\":[],\"extra\":{},\"game\":{\"basic\":{\"crashWithoutGsf\":-1,\"gameId\":100044965,\"inAppPurchase\":-1,\"isOnlineGame\":1,\"language\":\"CHS\",\"needNetwork\":1,\"packageName\":\"com.cmge.xianjian.wdj\"},\"developer\":null,\"extraProfile\":{\"coverImage\":{\"url\":null},\"userNotice\":null},\"review\":null,\"sectionProfile\":{\"longRecommWord\":\"逍遥哥哥，灵儿正在等你呢！\",\"shortRecommWord\":\"仙剑情怀感动重温\"},\"tags\":[{\"color\":{\"normal\":\"9D23C6\",\"pressed\":\"761A94\"},\"configUrl\":\"http://games.wandoujia.com/api/v1/game/vertical/tag/game/list/config/get?tagId=100002257&sortType=UNKNOWN\",\"icon\":\"http://img.wdjimg.com/image/game/9600793d53328568540b88629c19fcaa_250_250.png\",\"tagId\":100002257,\"tagName\":\"角色扮演\",\"tagType\":0,\"weight\":2},{\"color\":{\"normal\":\"34CBD2\",\"pressed\":\"27989D\"},\"configUrl\":\"http://games.wandoujia.com/api/v1/game/vertical/tag/game/list/config/get?tagId=100002261&sortType=UNKNOWN\",\"icon\":\"http://img.wdjimg.com/image/game/32d955c0be18b5ae78aec62a3e5393d2_250_250.png\",\"tagId\":100002261,\"tagName\":\"卡牌\",\"tagType\":0,\"weight\":2},{\"color\":{\"normal\":\"FF9D52\",\"pressed\":\"BF763D\"},\"configUrl\":\"http://games.wandoujia.com/api/v1/game/vertical/tag/game/list/config/get?tagId=100002295&sortType=UNKNOWN\",\"icon\":\"http://img.wdjimg.com/image/game/9cd4d2af559935702a72f4f0d6b51f58_250_250.png\",\"tagId\":100002295,\"tagName\":\"仙侠\",\"tagType\":1,\"weight\":2},{\"color\":{\"normal\":\"E97BAC\",\"pressed\":\"AF5C81\"},\"configUrl\":\"http://games.wandoujia.com/api/v1/game/vertical/tag/game/list/config/get?tagId=100002335&sortType=UNKNOWN\",\"icon\":null,\"tagId\":100002335,\"tagName\":\"Q版\",\"tagType\":2,\"weight\":1},{\"color\":{\"normal\":\"5AE4E9\",\"pressed\":\"43ABAF\"},\"configUrl\":\"http://games.wandoujia.com/api/v1/game/vertical/tag/game/list/config/get?tagId=100002334&sortType=UNKNOWN\",\"icon\":null,\"tagId\":100002334,\"tagName\":\"3D\",\"tagType\":2,\"weight\":2}],\"trailer\":null},\"icons\":{\"px48\":\"http://img.wdjimg.com/mms/icon/v1/6/7a/a86ed39ff1d0048049665bcd466ab7a6_48_48.png\",\"px100\":\"http://img.wdjimg.com/mms/icon/v1/6/7a/a86ed39ff1d0048049665bcd466ab7a6_100_100.png\",\"px256\":\"http://img.wdjimg.com/mms/icon/v1/6/7a/a86ed39ff1d0048049665bcd466ab7a6_256_256.png\",\"px78\":\"http://img.wdjimg.com/mms/icon/v1/6/7a/a86ed39ff1d0048049665bcd466ab7a6_78_78.png\",\"px24\":\"http://img.wdjimg.com/mms/icon/v1/6/7a/a86ed39ff1d0048049665bcd466ab7a6_24_24.png\",\"px68\":\"http://img.wdjimg.com/mms/icon/v1/6/7a/a86ed39ff1d0048049665bcd466ab7a6_68_68.png\",\"px36\":\"http://img.wdjimg.com/mms/icon/v1/6/7a/a86ed39ff1d0048049665bcd466ab7a6_36_36.png\"},\"iconsStr\":\"a86ed39ff1d0048049665bcd466ab7a6#512#512#png\",\"id\":3178160,\"imprUrl\":null,\"installedCount\":204168,\"installedCountStr\":\"20 万\",\"itemStatus\":1,\"latestApk\":{\"adsType\":\"NONE\",\"beta\":false,\"brief\":null,\"bytes\":15409841,\"compatible\":null,\"creation\":1427970464000,\"dangerousPermissions\":[\"发送短信（此操作可能需要付费）\",\"读取短信或彩信\",\"访问联系人数据\"],\"developerId\":null,\"downloadUrl\":{\"aggrWeight\":300,\"market\":\"官方\",\"referUrl\":\"http://apps.wandoujia.com/apps/com.cmge.xianjian.wdj?uid=70045767\",\"url\":\"http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"},\"downloadUrls\":[{\"aggrWeight\":300,\"market\":\"官方\",\"referUrl\":\"http://apps.wandoujia.com/apps/com.cmge.xianjian.wdj?uid=70045767\",\"url\":\"http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"}],\"featuresInfo\":787586,\"gameSdkVersion\":null,\"gsfType\":0,\"id\":13378544,\"incompatibleDetail\":null,\"itemStatus\":\"SHOW\",\"langType\":null,\"language\":[],\"maxSdkVersion\":0,\"md5\":\"6bffebb283b319ee23949c571c97f985\",\"minSdkVersion\":8,\"official\":1,\"packageName\":\"com.doudizhu.mainhuanle\",\"paidType\":\"NONE\",\"permissionGroups\":\"通讯录/短信/设备和应用历史记录/身份/照片/媒体/文件/WLAN 网络连接信息/设备 ID 和通话信息/其他\",\"permissionLevel\":\"TRUSTED\",\"permissionStatement\":\"短信用于验证码，通讯录用于邀请好友。\",\"permissions\":[\"显示系统级警报\",\"读取USB存储设备（例如：SD卡）中的内容\",\"查找设备上的帐户\",\"从互联网接收数据\",\"控制振动器\",\"查看 Wi-Fi 状态\",\"添加或移除帐户\",\"读取短信或彩信\",\"下载文件而不显示通知\",\"检索当前运行的应用程序\",\"访问联系人数据\",\"修改或删除USB存储设备中的内容\",\"读取手机状态和身份\",\"发送短信（此操作可能需要付费）\",\"创建帐户并设置密码\",\"修改全局系统设置\",\"查看网络状态\",\"防止手机休眠\"],\"resolution\":[\"ldpi\",\"mdpi\",\"hdpi\"],\"securityDetail\":[{\"failedInfo\":null,\"provider\":\"tencent\",\"status\":\"SAFE\"}],\"securityStatus\":\"SAFE\",\"signature\":\"5e78932d2878f6788d866294ed6ac491\",\"size\":\"14.7 M\",\"superior\":1,\"targetSdkVersion\":16,\"verified\":2,\"versionCode\":1,\"versionName\":\"1.0.3\"},\"likesCount\":304,\"likesRate\":82,\"negComments\":[],\"packageName\":\"com.doudizhu.mainhuanle\",\"posComments\":[],\"publishDate\":1428373918000,\"publishNoticeBean\":null,\"reputationScore\":81,\"screenshots\":{\"small\":[\"http://img.wdjimg.com/mms/screenshot/c/e7/162b56ce2875ea7188487873a4390e7c_200_333.jpeg\",\"http://img.wdjimg.com/mms/screenshot/f/31/08d20d18bd8e49ba930afbe568f9d31f_200_333.jpeg\",\"http://img.wdjimg.com/mms/screenshot/4/e3/b549a25f94da647aab9ad74a3d2e1e34_200_333.jpeg\",\"http://img.wdjimg.com/mms/screenshot/e/5b/566e6625da357cdc4f8aface4befe5be_200_333.jpeg\",\"http://img.wdjimg.com/mms/screenshot/8/ad/46cbfb228a837019255f649561657ad8_200_333.jpeg\"],\"normal\":[\"http://img.wdjimg.com/mms/screenshot/c/e7/162b56ce2875ea7188487873a4390e7c_320_533.jpeg\",\"http://img.wdjimg.com/mms/screenshot/f/31/08d20d18bd8e49ba930afbe568f9d31f_320_533.jpeg\",\"http://img.wdjimg.com/mms/screenshot/4/e3/b549a25f94da647aab9ad74a3d2e1e34_320_533.jpeg\",\"http://img.wdjimg.com/mms/screenshot/e/5b/566e6625da357cdc4f8aface4befe5be_320_533.jpeg\",\"http://img.wdjimg.com/mms/screenshot/8/ad/46cbfb228a837019255f649561657ad8_320_533.jpeg\"]},\"screenshotsStr\":\"162b56ce2875ea7188487873a4390e7c#480#800#jpeg,08d20d18bd8e49ba930afbe568f9d31f#480#800#jpeg,b549a25f94da647aab9ad74a3d2e1e34#480#800#jpeg,566e6625da357cdc4f8aface4befe5be#480#800#jpeg,46cbfb228a837019255f649561657ad8#480#800#jpeg\",\"selectedExtensionPack\":0,\"snippet\":\"永恒仙侠经典，全新精彩体验。！超萌Q版3D，全程语音对白，100%原味呈现二十年爱恨情愁经典剧情。经典回合战斗、守护灵兽全程助阵。\",\"stat\":{\"daily\":[{\"date\":1428508800000,\"downloadCount\":31933,\"downloadCountStr\":\"3.2 万\"},{\"date\":1428595200000,\"downloadCount\":67205,\"downloadCountStr\":\"6.7 万\"},{\"date\":1428681600000,\"downloadCount\":91557,\"downloadCountStr\":\"9.2 万\"},{\"date\":1428768000000,\"downloadCount\":89004,\"downloadCountStr\":\"8.9 万\"},{\"date\":1428854400000,\"downloadCount\":51946,\"downloadCountStr\":\"5.2 万\"},{\"date\":1428940800000,\"downloadCount\":47959,\"downloadCountStr\":\"4.8 万\"},{\"date\":1429027200000,\"downloadCount\":48018,\"downloadCountStr\":\"4.8 万\"}],\"total\":431039,\"totalStr\":\"43 万\",\"weekly\":427622,\"weeklyCommentsCount\":453,\"weeklyCommentsCountStr\":\"453 \",\"weeklyStr\":\"43 万\"},\"tagline\":\"3D官方正版\",\"tags\":[{\"tag\":\"网络游戏\",\"weight\":2},{\"tag\":\"角色扮演\",\"weight\":2},{\"tag\":\"武侠\",\"weight\":2},{\"tag\":\"联运\",\"weight\":0}],\"title\":\"新仙剑奇侠传\",\"titleEn\":null,\"updatedDate\":1428377149000}";
	std::string message = "{\"error\":0,\"msg\":\"operation success\",\"cards\":[{\"cardType\":\"TOP_SECTION_NORMAL\",\"extra\":\"TOP_WEEKLY_DOWNLOAD_CONSOLE_GAME:12:-1\",\"cardItem\":{\"feedItems\":[{\"title\":\"小小狂飙3D\",\"packageName\":\"com.doudizhu.mainhuanle\",\"apks\":[{\"bytes\":15409841,\"compatible\":1,\"md5\":\"6bffebb283b319ee23949c571c97f985\",\"paidType\":\"EMBEDED\",\"superior\":1,\"verified\":2,\"versionCode\":43,\"versionName\":\"1.4.3\",\"downloadUrl\":{\"url\":\"http://121.40.208.27/wandoujia.com/redirect/index.php?signature=5ff7123&url=http%3a%2f%2f121.40.208.27%2fwandoujia.com%2f6bffebb283b319ee23949c571c97f985.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/8/c6/0e81fe7b88fae69fa4657e972a9dcc68_512_512.png\"},\"recommend\":\"本周 37 万人安装  19.0MB\",\"pos\":1,\"detailParam\":\"pos=m/games/ranking/list/TOP_WEEKLY_DOWNLOAD_CONSOLE_GAME/-1\",\"apkObbs\":[]},{\"title\":\"开心消消乐\",\"packageName\":\"com.doudizhu.mainhuanle1\",\"apks\":[{\"bytes\":15409841,\"compatible\":1,\"md5\":\"6bffebb283b319ee23949c571c97f985\",\"paidType\":\"NONE\",\"superior\":1,\"verified\":2,\"versionCode\":22,\"versionName\":\"1.22\",\"downloadUrl\":{\"url\":\"http://121.40.208.27/wandoujia.com/redirect/index.php?signature=5ff7123&url=http%3a%2f%2f121.40.208.27%2fwandoujia.com%2f6bffebb283b319ee23949c571c97f985.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/f/b0/0bf36a51d34073a4ac36d54352035b0f_256_256.png\"},\"recommend\":\"本周 16 万人安装  40.1MB\",\"pos\":2,\"detailParam\":\"pos=m/games/ranking/list/TOP_WEEKLY_DOWNLOAD_CONSOLE_GAME/-1\",\"apkObbs\":[]},{\"title\":\"口袋沙盘(我的世界) MineCraft\",\"packageName\":\"com.mojang.minecraftpe\",\"apks\":[{\"bytes\":14650964,\"compatible\":1,\"md5\":\"17e06fb03140ba72cf86b3605db851e2\",\"paidType\":\"NONE\",\"superior\":0,\"verified\":2,\"versionCode\":740110005,\"versionName\":\"0.11.0.b5\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13885116&md5=17e06fb03140ba72cf86b3605db851e2&vc=740110005&pn=com.mojang.minecraftpe&appType=GAME&url=http%3A%2F%2Fapk.hiapk.com%2Fappdown%2Fcom.mojang.minecraftpe%3Fem%3D14&signature=551e543&pos=m/games/ranking/section/TOP_WEEKLY_DOWNLOAD_CONSOLE_GAME/-1&size=14650964\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/9/35/6454926f796ca9108a314b15cbf69359_256_256.png\"},\"recommend\":\"本周 11 万人安装  14.0MB\",\"pos\":3,\"detailParam\":\"pos=m/games/ranking/list/TOP_WEEKLY_DOWNLOAD_CONSOLE_GAME/-1\",\"apkObbs\":[]}],\"feedStyle\":{\"title\":\"七日单机下载 Top 50\",\"action\":{\"intent\":{\"component\":\"com.wandoujia.phoenix2/com.wandoujia.p4.game.activity.RankingGameListActivity\",\"extras\":[{\"key\":\"title\",\"value\":\"七日单机下载 Top 50\",\"type\":\"string\"},{\"key\":\"type\",\"value\":\"TOP_WEEKLY_DOWNLOAD_CONSOLE_GAME\",\"type\":\"string\"},{\"key\":\"dataId\",\"value\":\"-1\",\"type\":\"string\"},{\"key\":\"config_url\",\"value\":\"http://games.wandoujia.com/api/v1/game/vertical/newtops/config/get?type=TOP_WEEKLY_DOWNLOAD_CONSOLE_GAME&dataId=-1\",\"type\":\"string\"}]},\"type\":\"view\",\"name\":\"查看全部\"}}}},{\"cardType\":\"TOP_SECTION_NORMAL\",\"extra\":\"TOP_WEEKLY_DOWNLOAD_ONLINE_GAME:13:-1\",\"cardItem\":{\"feedItems\":[{\"title\":\"新仙剑奇侠传\",\"packageName\":\"com.cmge.xianjian.wdj\",\"apks\":[{\"bytes\":123635932,\"compatible\":1,\"md5\":\"0e4d5de106aace913cb9eec4e07c88b8\",\"paidType\":\"NONE\",\"superior\":1,\"verified\":2,\"versionCode\":1,\"versionName\":\"1.0.3\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13378544&md5=0e4d5de106aace913cb9eec4e07c88b8&vc=1&pn=com.cmge.xianjian.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F8%2F8b%2F0e4d5de106aace913cb9eec4e07c88b8.apk&signature=2b080e0&pos=m/games/ranking/section/TOP_WEEKLY_DOWNLOAD_ONLINE_GAME/-1&size=123635932\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/6/7a/a86ed39ff1d0048049665bcd466ab7a6_256_256.png\"},\"recommend\":\"本周 16 万人安装  118MB\",\"pos\":1,\"detailParam\":\"pos=m/games/ranking/list/TOP_WEEKLY_DOWNLOAD_ONLINE_GAME/-1\",\"apkObbs\":[]},{\"title\":\"梦幻西游\",\"packageName\":\"com.netease.my.wdj\",\"apks\":[{\"bytes\":240360571,\"compatible\":1,\"md5\":\"20c2eb3b7318708820de0af825df0279\",\"paidType\":\"NONE\",\"superior\":1,\"verified\":2,\"versionCode\":10140,\"versionName\":\"1.14.0\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13522580&md5=20c2eb3b7318708820de0af825df0279&vc=10140&pn=com.netease.my.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F9%2F27%2F20c2eb3b7318708820de0af825df0279.apk&signature=a1b4997&pos=m/games/ranking/section/TOP_WEEKLY_DOWNLOAD_ONLINE_GAME/-1&size=240360571\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/3/3a/736dccf5525f818507a72720a2ec93a3_256_256.png\"},\"recommend\":\"本周 7.3 万人安装  229MB\",\"pos\":2,\"detailParam\":\"pos=m/games/ranking/list/TOP_WEEKLY_DOWNLOAD_ONLINE_GAME/-1\",\"apkObbs\":[]},{\"title\":\"全民枪战\",\"packageName\":\"com.crisisfire.android.wdj\",\"apks\":[{\"bytes\":144913907,\"compatible\":1,\"md5\":\"2f71d620a44955ad0a0b8e2dfc6d0228\",\"paidType\":\"NONE\",\"superior\":1,\"verified\":2,\"versionCode\":12,\"versionName\":\"1.8.1\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13361852&md5=2f71d620a44955ad0a0b8e2dfc6d0228&vc=12&pn=com.crisisfire.android.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F8%2F22%2F2f71d620a44955ad0a0b8e2dfc6d0228.apk&signature=bc09ed8&pos=m/games/ranking/section/TOP_WEEKLY_DOWNLOAD_ONLINE_GAME/-1&size=144913907\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/2/1b/d7dd274d0433a9c336d1ba67eeee61b2_256_256.png\"},\"recommend\":\"本周 5.4 万人安装  138MB\",\"pos\":3,\"detailParam\":\"pos=m/games/ranking/list/TOP_WEEKLY_DOWNLOAD_ONLINE_GAME/-1\",\"apkObbs\":[]}],\"feedStyle\":{\"title\":\"七日网游下载 Top 50\",\"action\":{\"intent\":{\"component\":\"com.wandoujia.phoenix2/com.wandoujia.p4.game.activity.RankingGameListActivity\",\"extras\":[{\"key\":\"title\",\"value\":\"七日网游下载 Top 50\",\"type\":\"string\"},{\"key\":\"type\",\"value\":\"TOP_WEEKLY_DOWNLOAD_ONLINE_GAME\",\"type\":\"string\"},{\"key\":\"dataId\",\"value\":\"-1\",\"type\":\"string\"},{\"key\":\"config_url\",\"value\":\"http://games.wandoujia.com/api/v1/game/vertical/newtops/config/get?type=TOP_WEEKLY_DOWNLOAD_ONLINE_GAME&dataId=-1\",\"type\":\"string\"}]},\"type\":\"view\",\"name\":\"查看全部\"}}}},{\"cardType\":\"TOP_SECTION_NORMAL\",\"extra\":\"TOP_OPERATION_GAME:9:1415428845220548\",\"cardItem\":{\"feedItems\":[{\"title\":\"小小狂飙3D\",\"packageName\":\"com.wandoujia.car3d4\",\"apks\":[{\"bytes\":19872551,\"compatible\":1,\"md5\":\"6e32b6a886d882b3e6623ca89893f2f2\",\"paidType\":\"EMBEDED\",\"superior\":1,\"verified\":2,\"versionCode\":43,\"versionName\":\"1.4.3\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13922304&md5=6e32b6a886d882b3e6623ca89893f2f2&vc=43&pn=com.wandoujia.car3d4&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F2%2F2f%2F6e32b6a886d882b3e6623ca89893f2f2.apk&signature=f6596c2&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220548&size=19872551\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/8/c6/0e81fe7b88fae69fa4657e972a9dcc68_512_512.png\"},\"recommend\":\"豌豆荚独家定制竞技飙车大作\",\"pos\":1,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220548\",\"apkObbs\":[]},{\"title\":\"愤怒的小鸟思黛拉泡泡\",\"packageName\":\"com.rovio.ABstellapop\",\"apks\":[{\"bytes\":46804431,\"compatible\":1,\"md5\":\"7d83df02a2c401fb341b16ee67659ddc\",\"paidType\":\"NONE\",\"superior\":0,\"verified\":1,\"versionCode\":1001016,\"versionName\":\"1.1.16\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13328757&md5=7d83df02a2c401fb341b16ee67659ddc&vc=1001016&pn=com.rovio.ABstellapop&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2Fc%2Fdd%2F7d83df02a2c401fb341b16ee67659ddc.apk&signature=d0f3350&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220548&size=46804431\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/e/78/c0e06759d747b073474f2ed0b857478e_256_256.png\"},\"recommend\":\"小鸟全新泡泡龙游戏，弹爆坏猪超过瘾\",\"pos\":2,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220548\",\"apkObbs\":[]},{\"title\":\"疯狂出租车-都市狂飙\",\"packageName\":\"com.sega.crazytaxicityrush.wdj\",\"apks\":[{\"bytes\":71933177,\"compatible\":1,\"md5\":\"5ed172f3c27aa5a66b19231b3e490689\",\"paidType\":\"NONE\",\"superior\":0,\"verified\":2,\"versionCode\":10000,\"versionName\":\"2.0.0\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13173851&md5=5ed172f3c27aa5a66b19231b3e490689&vc=10000&pn=com.sega.crazytaxicityrush.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F9%2F68%2F5ed172f3c27aa5a66b19231b3e490689.apk&signature=fed8802&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220548&size=71933177\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/d/26/ec146a558757298212ba33851930326d_512_512.png\"},\"recommend\":\"SEGA 经典街机风格赛车游戏\",\"pos\":3,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220548\",\"apkObbs\":[]}],\"feedStyle\":{\"title\":\"三月最佳单机 Top 10\",\"action\":{\"intent\":{\"component\":\"com.wandoujia.phoenix2/com.wandoujia.p4.game.activity.RankingGameListActivity\",\"extras\":[{\"key\":\"title\",\"value\":\"三月最佳单机 Top 10\",\"type\":\"string\"},{\"key\":\"type\",\"value\":\"TOP_OPERATION_GAME\",\"type\":\"string\"},{\"key\":\"dataId\",\"value\":\"1415428845220548\",\"type\":\"string\"},{\"key\":\"config_url\",\"value\":\"http://games.wandoujia.com/api/v1/game/vertical/newtops/config/get?type=TOP_OPERATION_GAME&dataId=1415428845220548\",\"type\":\"string\"}]},\"type\":\"view\",\"name\":\"查看全部\"}}}},{\"cardType\":\"TOP_SECTION_NORMAL\",\"extra\":\"TOP_OPERATION_GAME:10:1415428845220549\",\"cardItem\":{\"feedItems\":[{\"title\":\"梦幻西游\",\"packageName\":\"com.netease.my.wdj\",\"apks\":[{\"bytes\":240360571,\"compatible\":1,\"md5\":\"20c2eb3b7318708820de0af825df0279\",\"paidType\":\"NONE\",\"superior\":1,\"verified\":2,\"versionCode\":10140,\"versionName\":\"1.14.0\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13522580&md5=20c2eb3b7318708820de0af825df0279&vc=10140&pn=com.netease.my.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F9%2F27%2F20c2eb3b7318708820de0af825df0279.apk&signature=a1b4997&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220549&size=240360571\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/3/3a/736dccf5525f818507a72720a2ec93a3_256_256.png\"},\"recommend\":\"西游梦，新征途，回合制手游巅峰之作\",\"pos\":1,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220549\",\"apkObbs\":[]},{\"title\":\"十万个冷笑话\",\"packageName\":\"com.linekong.cjad.wdj\",\"apks\":[{\"bytes\":55790652,\"compatible\":1,\"md5\":\"a84178ad9a564e2c494b43dc58716547\",\"paidType\":\"NONE\",\"superior\":1,\"verified\":2,\"versionCode\":14948,\"versionName\":\"1.0.15.1050\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13163821&md5=a84178ad9a564e2c494b43dc58716547&vc=14948&pn=com.linekong.cjad.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F7%2F54%2Fa84178ad9a564e2c494b43dc58716547.apk&signature=6ab09d4&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220549&size=55790652\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/6/09/ad2bec886a4d8d5bb6a9686ca2cc7096_256_256.png\"},\"recommend\":\"最纯正的十冷式精彩，神马世界大有搞头\",\"pos\":2,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220549\",\"apkObbs\":[]},{\"title\":\"我叫MT外传\",\"packageName\":\"com.locojoy.mtwzandroid.wdj\",\"apks\":[{\"bytes\":136189739,\"compatible\":1,\"md5\":\"ab721f5ff9d65697f337fcd70681fdbf\",\"paidType\":\"NONE\",\"superior\":1,\"verified\":2,\"versionCode\":1002004,\"versionName\":\"1.2.4\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13291381&md5=ab721f5ff9d65697f337fcd70681fdbf&vc=1002004&pn=com.locojoy.mtwzandroid.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2Ff%2Fdb%2Fab721f5ff9d65697f337fcd70681fdbf.apk&signature=d48c190&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220549&size=136189739\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/2/f1/df5bd81d81aa3bdc9cbf724eecb04f12_512_512.png\"},\"recommend\":\"《我叫MT》的正品续作，呆萌3D战棋巨制\",\"pos\":3,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220549\",\"apkObbs\":[]}],\"feedStyle\":{\"title\":\"三月最佳网游 Top 10\",\"action\":{\"intent\":{\"component\":\"com.wandoujia.phoenix2/com.wandoujia.p4.game.activity.RankingGameListActivity\",\"extras\":[{\"key\":\"title\",\"value\":\"三月最佳网游 Top 10\",\"type\":\"string\"},{\"key\":\"type\",\"value\":\"TOP_OPERATION_GAME\",\"type\":\"string\"},{\"key\":\"dataId\",\"value\":\"1415428845220549\",\"type\":\"string\"},{\"key\":\"config_url\",\"value\":\"http://games.wandoujia.com/api/v1/game/vertical/newtops/config/get?type=TOP_OPERATION_GAME&dataId=1415428845220549\",\"type\":\"string\"}]},\"type\":\"view\",\"name\":\"查看全部\"}}}},{\"cardType\":\"TOP_SECTION_NORMAL\",\"extra\":\"TOP_OPERATION_GAME:7:1415428845220546\",\"cardItem\":{\"feedItems\":[{\"title\":\"炉石传说下载器\",\"packageName\":\"ne.lushi.lushilauncher\",\"apks\":[{\"bytes\":4734452,\"compatible\":1,\"md5\":\"1eca0aadf66284351cbe434330470265\",\"paidType\":\"NONE\",\"superior\":0,\"verified\":2,\"versionCode\":2,\"versionName\":\"1.11\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13788884&md5=1eca0aadf66284351cbe434330470265&vc=2&pn=ne.lushi.lushilauncher&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F5%2F26%2F1eca0aadf66284351cbe434330470265.apk&signature=fb0ebe2&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220546&size=4734452\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/8/64/a183b1c08343fbd00c10ea7180590648_512_512.png\"},\"recommend\":\"炉石传说手机版官方下载器震撼发布\",\"pos\":1,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220546\",\"apkObbs\":[]},{\"title\":\"玩玩车神\",\"packageName\":\"com.studiokun.wanwancheshen.wdj\",\"apks\":[{\"bytes\":33918137,\"compatible\":1,\"md5\":\"e16211679a5c5ea9babba1242f84ab9e\",\"paidType\":\"EMBEDED\",\"superior\":1,\"verified\":2,\"versionCode\":3,\"versionName\":\"1.0.2\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13752646&md5=e16211679a5c5ea9babba1242f84ab9e&vc=3&pn=com.studiokun.wanwancheshen.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2Fe%2Fb9%2Fe16211679a5c5ea9babba1242f84ab9e.apk&signature=acab5d7&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220546&size=33918137\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/7/33/aa49b44920650947dc8f27e44d056337_256_256.png\"},\"recommend\":\"速度！激情！玩转百万豪车，体验极限快感\",\"pos\":2,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220546\",\"apkObbs\":[]},{\"title\":\"碰撞小点:Boom Dots\",\"packageName\":\"com.umbrella.boomdots\",\"apks\":[{\"bytes\":17817155,\"compatible\":1,\"md5\":\"ef7e7795d0b7ce1df7722d616020c673\",\"paidType\":\"NONE\",\"superior\":0,\"verified\":1,\"versionCode\":9,\"versionName\":\"1.2.2\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13892734&md5=ef7e7795d0b7ce1df7722d616020c673&vc=9&pn=com.umbrella.boomdots&appType=GAME&url=http%3A%2F%2Fapp.mi.com%2Fdownload%2F89736&signature=41cc0c2&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220546&size=17817155\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/b/15/d81a16e3938a49bbf83d71358b38a15b_300_300.png\"},\"recommend\":\"一击命中，稳准狠。小心戳爆屏幕哦！\",\"pos\":3,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220546\",\"apkObbs\":[]}],\"feedStyle\":{\"title\":\"豌豆荚口碑榜 Top 10\",\"action\":{\"intent\":{\"component\":\"com.wandoujia.phoenix2/com.wandoujia.p4.game.activity.RankingGameListActivity\",\"extras\":[{\"key\":\"title\",\"value\":\"豌豆荚口碑榜 Top 10\",\"type\":\"string\"},{\"key\":\"type\",\"value\":\"TOP_OPERATION_GAME\",\"type\":\"string\"},{\"key\":\"dataId\",\"value\":\"1415428845220546\",\"type\":\"string\"},{\"key\":\"config_url\",\"value\":\"http://games.wandoujia.com/api/v1/game/vertical/newtops/config/get?type=TOP_OPERATION_GAME&dataId=1415428845220546\",\"type\":\"string\"}]},\"type\":\"view\",\"name\":\"查看全部\"}}}},{\"cardType\":\"TOP_SECTION_NORMAL\",\"extra\":\"TOP_OPERATION_GAME:8:1415428845220547\",\"cardItem\":{\"feedItems\":[{\"title\":\"炉石传说下载器\",\"packageName\":\"ne.lushi.lushilauncher\",\"apks\":[{\"bytes\":4734452,\"compatible\":1,\"md5\":\"1eca0aadf66284351cbe434330470265\",\"paidType\":\"NONE\",\"superior\":0,\"verified\":2,\"versionCode\":2,\"versionName\":\"1.11\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13788884&md5=1eca0aadf66284351cbe434330470265&vc=2&pn=ne.lushi.lushilauncher&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F5%2F26%2F1eca0aadf66284351cbe434330470265.apk&signature=fb0ebe2&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220547&size=4734452\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/8/64/a183b1c08343fbd00c10ea7180590648_512_512.png\"},\"recommend\":\"炉石传说手机版官方下载器震撼发布\",\"pos\":1,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220547\",\"apkObbs\":[]},{\"title\":\"卡瓦飞车 Cava Racing\",\"packageName\":\"umbergames.cavaracing\",\"apks\":[{\"bytes\":30333681,\"compatible\":1,\"md5\":\"60a46a3779a1e9193c6e1505ff18e707\",\"paidType\":\"NONE\",\"superior\":0,\"verified\":1,\"versionCode\":5,\"versionName\":\"1.0\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13663760&md5=60a46a3779a1e9193c6e1505ff18e707&vc=5&pn=umbergames.cavaracing&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F7%2F70%2F60a46a3779a1e9193c6e1505ff18e707.apk&signature=489a6f2&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220547&size=30333681\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/6/36/b59be929b96f2ac1e7de92edd2265366_256_256.png\"},\"recommend\":\"太空飞车重力漂移,做出最华丽的动作\",\"pos\":2,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220547\",\"apkObbs\":[]},{\"title\":\"Minik大逃亡\",\"packageName\":\"com.Kiarygames.Minikrun\",\"apks\":[{\"bytes\":31215016,\"compatible\":1,\"md5\":\"9eddca7f6694b82473422f6079b99716\",\"paidType\":\"NONE\",\"superior\":0,\"verified\":1,\"versionCode\":22,\"versionName\":\"1.08\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13589702&md5=9eddca7f6694b82473422f6079b99716&vc=22&pn=com.Kiarygames.Minikrun&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F6%2F71%2F9eddca7f6694b82473422f6079b99716.apk&signature=5ff7123&pos=m/games/ranking/section/TOP_OPERATION_GAME/1415428845220547&size=31215016\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/1/a6/993c171c5dd16ccd1c7c26fb48baba61_256_256.png\"},\"recommend\":\"噩梦空间无尽逃脱，快来拯救minik吧！\",\"pos\":3,\"detailParam\":\"pos=m/games/ranking/list/TOP_OPERATION_GAME/1415428845220547\",\"apkObbs\":[]}],\"feedStyle\":{\"title\":\"本周上架新游戏 Top 10\",\"action\":{\"intent\":{\"component\":\"com.wandoujia.phoenix2/com.wandoujia.p4.game.activity.RankingGameListActivity\",\"extras\":[{\"key\":\"title\",\"value\":\"本周上架新游戏 Top 10\",\"type\":\"string\"},{\"key\":\"type\",\"value\":\"TOP_OPERATION_GAME\",\"type\":\"string\"},{\"key\":\"dataId\",\"value\":\"1415428845220547\",\"type\":\"string\"},{\"key\":\"config_url\",\"value\":\"http://games.wandoujia.com/api/v1/game/vertical/newtops/config/get?type=TOP_OPERATION_GAME&dataId=1415428845220547\",\"type\":\"string\"}]},\"type\":\"view\",\"name\":\"查看全部\"}}}},{\"cardType\":\"TOP_SECTION_NORMAL\",\"extra\":\"TOP_REVENUE_GAME:11:-1\",\"cardItem\":{\"feedItems\":[{\"title\":\"刀塔传奇\",\"packageName\":\"sh.lilith.dgame.wdj\",\"apks\":[{\"bytes\":199120531,\"compatible\":1,\"md5\":\"12f4c57875e875f205fac6534f771425\",\"paidType\":\"NONE\",\"superior\":1,\"verified\":2,\"versionCode\":40647,\"versionName\":\"3.2.4\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13922606&md5=12f4c57875e875f205fac6534f771425&vc=40647&pn=sh.lilith.dgame.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F5%2F42%2F12f4c57875e875f205fac6534f771425.apk&signature=3ec1d51&pos=m/games/ranking/section/TOP_REVENUE_GAME/-1&size=199120531\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/1/2f/651fa66fab7000f5f5717ad193a6b2f1_512_512.png\"},\"recommend\":\"本周 2.5 万人安装  190MB\",\"pos\":1,\"detailParam\":\"pos=m/games/ranking/list/TOP_REVENUE_GAME/-1\",\"apkObbs\":[]},{\"title\":\"梦幻西游\",\"packageName\":\"com.netease.my.wdj\",\"apks\":[{\"bytes\":240360571,\"compatible\":1,\"md5\":\"20c2eb3b7318708820de0af825df0279\",\"paidType\":\"NONE\",\"superior\":1,\"verified\":2,\"versionCode\":10140,\"versionName\":\"1.14.0\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13522580&md5=20c2eb3b7318708820de0af825df0279&vc=10140&pn=com.netease.my.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2F9%2F27%2F20c2eb3b7318708820de0af825df0279.apk&signature=a1b4997&pos=m/games/ranking/section/TOP_REVENUE_GAME/-1&size=240360571\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/3/3a/736dccf5525f818507a72720a2ec93a3_256_256.png\"},\"recommend\":\"本周 7.3 万人安装  229MB\",\"pos\":2,\"detailParam\":\"pos=m/games/ranking/list/TOP_REVENUE_GAME/-1\",\"apkObbs\":[]},{\"title\":\"全民奇迹\",\"packageName\":\"com.tianmashikong.qmqj.wdj\",\"apks\":[{\"bytes\":247729047,\"compatible\":1,\"md5\":\"7eb37bb7b154d6e3c39e304003bad4eb\",\"paidType\":\"NONE\",\"superior\":1,\"verified\":2,\"versionCode\":140,\"versionName\":\"1.4.0\",\"downloadUrl\":{\"url\":\"http://apps.wandoujia.com/redirect?apkid=13806232&md5=7eb37bb7b154d6e3c39e304003bad4eb&vc=140&pn=com.tianmashikong.qmqj.wdj&appType=GAME&url=http%3A%2F%2Fapk.wandoujia.com%2Fb%2F4e%2F7eb37bb7b154d6e3c39e304003bad4eb.apk&signature=305b4e1&pos=m/games/ranking/section/TOP_REVENUE_GAME/-1&size=247729047\"}}],\"icons\":{\"px256\":\"http://img.wdjimg.com/mms/icon/v1/9/98/f7c33dd328a28d9b7e580d89f4b6c989_256_256.png\"},\"recommend\":\"本周 6137 人安装  236MB\",\"pos\":3,\"detailParam\":\"pos=m/games/ranking/list/TOP_REVENUE_GAME/-1\",\"apkObbs\":[]}],\"feedStyle\":{\"title\":\"土豪扎堆游戏 Top 50\",\"action\":{\"intent\":{\"component\":\"com.wandoujia.phoenix2/com.wandoujia.p4.game.activity.RankingGameListActivity\",\"extras\":[{\"key\":\"title\",\"value\":\"土豪扎堆游戏 Top 50\",\"type\":\"string\"},{\"key\":\"type\",\"value\":\"TOP_REVENUE_GAME\",\"type\":\"string\"},{\"key\":\"dataId\",\"value\":\"-1\",\"type\":\"string\"},{\"key\":\"config_url\",\"value\":\"http://games.wandoujia.com/api/v1/game/vertical/newtops/config/get?type=TOP_REVENUE_GAME&dataId=-1\",\"type\":\"string\"}]},\"type\":\"view\",\"name\":\"查看全部\"}}}}]}";
	base_logic::LogicComm::SendFull(socket,message.c_str(),message.length());

	/*std::string pnname = "com.og.danjiddz";
	std::string key = ".wandoujia";
	std::string message;
	OnReplaceAppSummary(key,pnname);
	base_logic::LogicComm::SendFull(socket,message.c_str(),message.length());
	*/
	return true;
}

bool  Hacklogic::OnHackSNSSDKArticel(struct server *srv,const int socket,netcomm_recv::NetBase* netbase,
    		const void* msg,const int len){
	//std::string message = "{\"login_status\":1,\"total_number\":8,\"has_more\":false,\"message\":\"success\",\"data\":[{\"ban_comment\":0,\"abstract\":\"【环球时报驻菲律宾特约记者 张晓闻 赵敏敏】据路透社报道，菲律宾活动人士22日指责中国海警在“争议海域”对菲渔船使用高压水枪，损毁其中部分木船。美国国务院发言人随后表态称，“倘若情况属实这将是一种挑衅行为，是寻求外交途径解决纠纷努力的退步”。中国外交部发言人洪磊22日对菲美说法予\",\"image_list\":[],\"has_video\":false,\"article_type\":1,\"tag\":\"news_world\",\"has_m3u8_video\":0,\"keywords\":\"\",\"has_mp4_video\":0,\"article_sub_type\":1,\"repin_time\":0,\"title\":\"外交部回应“水炮”驱逐菲渔船 让菲管好渔民\",\"tip\":0,\"comment_count\":16,\"share_url\":\"http://toutiao.com/i/group/article/4257145471/?iid=2504166604&app=news_article\",\"source\":\"环球网\",\"hot\":0,\"article_url\":\"http://tthz.huanqiu.com/viewTouTiao.html?newId=5678795&f=jrtt\",\"repin_count\":657,\"publish_time\":1429742368,\"user_bury\":0,\"display_title\":\"http://tthz.huanqiu.com/viewTouTiao.html?newId=5678795&f=jrtt\",\"tag_id\":4257145471,\"user_digg\":0,\"bury_count\":0,\"level\":0,\"url\":\"http://tthz.huanqiu.com/viewTouTiao.html?newId=5678795&f=jrtt\",\"display_url\":\"http://tthz.huanqiu.com/viewTouTiao.html?newId=5678795&f=jrtt\",\"digg_count\":2530,\"behot_time\":1429770535,\"article_alt_url\":\"http://toutiao.com/group/article/4257145471/\",\"preload_web\":1,\"has_image\":false,\"group_id\":4257145471},{\"ban_comment\":0,\"abstract\":\"习近平22日在雅加达应约会见安倍晋三。习近平指出，处理中日关系的大原则，就是要严格遵循中日四个政治文件的精神，确保两国关系沿着正确方向发展。希望日方认真对待亚洲邻国的关切，对外发出正视历史的积极信息。\",\"image_list\":[{\"url\":\"http://p2.pstatp.com/list/3055/6737237843\",\"width\":891,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/3055/6737237843\"},{\"url\":\"http://p5.pstatp.com/list/3055/6737237843\"},{\"url\":\"http://p.pstatp.com/list/3055/6737237843\"}],\"uri\":\"list/3055/6737237843\",\"height\":622},{\"url\":\"http://p2.pstatp.com/list/3050/7449458946\",\"width\":640,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/3050/7449458946\"},{\"url\":\"http://p5.pstatp.com/list/3050/7449458946\"},{\"url\":\"http://p.pstatp.com/list/3050/7449458946\"}],\"uri\":\"list/3050/7449458946\",\"height\":452},{\"url\":\"http://p3.pstatp.com/list/3049/7647401777\",\"width\":640,\"url_list\":[{\"url\":\"http://p3.pstatp.com/list/3049/7647401777\"},{\"url\":\"http://p6.pstatp.com/list/3049/7647401777\"},{\"url\":\"http://p.pstatp.com/list/3049/7647401777\"}],\"uri\":\"list/3049/7647401777\",\"height\":425}],\"has_video\":false,\"article_type\":0,\"tag\":\"news_politics\",\"has_m3u8_video\":0,\"keywords\":\"习近平\",\"has_mp4_video\":0,\"article_sub_type\":0,\"repin_time\":0,\"title\":\"习近平应约会见安倍晋三\",\"tip\":0,\"comment_count\":9,\"share_url\":\"http://toutiao.com/i/group/article/4255039462/?iid=2504166604&app=news_article\",\"source\":\"南海网\",\"hot\":0,\"article_url\":\"http://www.hinews.cn/news/system/2015/04/22/017505256.shtml\",\"repin_count\":2246,\"publish_time\":1429715542,\"user_bury\":0,\"display_title\":\"http://www.hinews.cn/news/system/2015/04/22/017505256.shtml\",\"tag_id\":4255039462,\"user_digg\":0,\"bury_count\":0,\"level\":0,\"url\":\"http://www.hinews.cn/news/system/2015/04/22/017505256.shtml\",\"display_url\":\"http://www.hinews.cn/news/system/2015/04/22/017505256.shtml\",\"digg_count\":4347,\"behot_time\":1429770534,\"preload_web\":1,\"has_image\":true,\"group_id\":4255039462,\"middle_image\":{\"url\":\"http://p2.pstatp.com/list/3055/6737237843\",\"width\":891,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/3055/6737237843\"},{\"url\":\"http://p5.pstatp.com/list/3055/6737237843\"},{\"url\":\"http://p.pstatp.com/list/3055/6737237843\"}],\"uri\":\"list/3055/6737237843\",\"height\":622}},{\"ban_comment\":0,\"abstract\":\"4月20日LOL解说小智在直播过程中被人用侮辱ID“小智我是你爹”的用户名持续骚扰，导致其在直播中失控；而小智在与韩国一位玩家打完比赛后没有与该玩家说下场不打，只是告知其翻译及老板，于是有喷子称小智没素质。\",\"image_list\":[],\"has_video\":false,\"article_type\":0,\"tag\":\"news_game\",\"has_m3u8_video\":0,\"keywords\":\"小智,任天堂,斗鱼,女主播\",\"has_mp4_video\":0,\"article_sub_type\":0,\"repin_time\":0,\"title\":\"主播辛酸史：小智将解约 多人被欠薪\",\"tip\":0,\"comment_count\":311,\"share_url\":\"http://toutiao.com/group/article/4252730080/?iid=2504166604&app=news_article\",\"source\":\"每日游戏播报\",\"hot\":0,\"article_url\":\"http://toutiao.com/group/4252730080/\",\"repin_count\":572,\"publish_time\":1429719624,\"user_bury\":0,\"display_title\":\"http://toutiao.com/group/4252730080/\",\"tag_id\":4252730080,\"user_digg\":0,\"bury_count\":972,\"level\":0,\"url\":\"http://toutiao.com/group/4252730080/\",\"display_url\":\"http://toutiao.com/group/4252730080/\",\"digg_count\":159,\"behot_time\":1429770533,\"preload_web\":1,\"has_image\":true,\"group_id\":4252730080,\"middle_image\":{\"url\":\"http://p3.pstatp.com/list/3048/6227528727\",\"width\":378,\"url_list\":[{\"url\":\"http://p3.pstatp.com/list/3048/6227528727\"},{\"url\":\"http://p6.pstatp.com/list/3048/6227528727\"},{\"url\":\"http://p.pstatp.com/list/3048/6227528727\"}],\"uri\":\"list/3048/6227528727\",\"height\":264}},{\"log_extra\":\"{\\\"req_id\\\": \\\"8837e6e55707c17fb\\\"}\",\"open_url\":\"\",\"app_name\":\"途游欢乐斗地主\",\"image\":{\"width\":580,\"url_list\":[{\"url\":\"http://p2.pstatp.com/origin/2952/2448133154\"}],\"uri\":\"2952/2448133154\",\"height\":240},\"rate\":-1,\"web_url\":\"http://api.snssdk.com/2/ad/4231801180/\",\"alert_text\":\"\",\"id\":4231801180,\"click_track_url\":\"\",\"cell_type\":10,\"title\":\"途游欢乐斗地主\",\"click_track_url_list\":[],\"download_url\":\"http://apk.dl.tuyoo.com/down/ddz/cpa30.happy.2837.apk\",\"label\":\"推广\",\"version\":\"2.7.0\",\"track_url_list\":[],\"type\":\"app\",\"track_url\":\"\",\"ad_id\":4231801180,\"description\":\"即时上手，离线PK拣装备，让你挂上瘾！\",\"web_title\":\"途游欢乐斗地主\",\"display_type\":2,\"package\":\"com.doudizhu.mainhuanle\",\"behot_time\":1429770532},{\"ban_comment\":0,\"abstract\":\"“宫外孕”这个词相信大家都不会感到陌生，一说到宫外孕大多数女性心里都会觉得很惶恐，生怕自己会摊上这种不幸的事。因为宫外孕的危害极大，一不小心就会危及孕妇的生命！下面小编就给大家介绍一下最易发生宫外孕的七类人，大家赶紧提高警惕吧！宫外孕就是精子在子宫外面和卵子结合形成了胚胎，最常见\",\"image_list\":[{\"url\":\"http://p2.pstatp.com/list/2998/7282660536\",\"width\":400,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/2998/7282660536\"},{\"url\":\"http://p5.pstatp.com/list/2998/7282660536\"},{\"url\":\"http://p.pstatp.com/list/2998/7282660536\"}],\"uri\":\"list/2998/7282660536\",\"height\":250},{\"url\":\"http://p1.pstatp.com/list/2999/7396489502\",\"width\":400,\"url_list\":[{\"url\":\"http://p1.pstatp.com/list/2999/7396489502\"},{\"url\":\"http://p6.pstatp.com/list/2999/7396489502\"},{\"url\":\"http://p.pstatp.com/list/2999/7396489502\"}],\"uri\":\"list/2999/7396489502\",\"height\":250},{\"url\":\"http://p2.pstatp.com/list/2997/7638120708\",\"width\":400,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/2997/7638120708\"},{\"url\":\"http://p5.pstatp.com/list/2997/7638120708\"},{\"url\":\"http://p.pstatp.com/list/2997/7638120708\"}],\"uri\":\"list/2997/7638120708\",\"height\":250}],\"has_video\":false,\"article_type\":0,\"tag\":\"news_baby\",\"has_m3u8_video\":0,\"keywords\":\"宫外孕,输卵管,女性\",\"has_mp4_video\":0,\"article_sub_type\":0,\"repin_time\":0,\"title\":\"这七种人竟被“宫外孕”盯上了！你中枪了吗？\",\"tip\":0,\"comment_count\":401,\"share_url\":\"http://toutiao.com/group/article/4232040007/?iid=2504166604&app=news_article\",\"source\":\"健客资讯\",\"hot\":0,\"article_url\":\"http://toutiao.com/group/4232040007/\",\"repin_count\":2004,\"publish_time\":1429519532,\"user_bury\":0,\"display_title\":\"http://toutiao.com/group/4232040007/\",\"tag_id\":4232040007,\"user_digg\":0,\"bury_count\":534,\"level\":0,\"url\":\"http://toutiao.com/group/4232040007/\",\"display_url\":\"http://toutiao.com/group/4232040007/\",\"digg_count\":159,\"behot_time\":1429770531,\"preload_web\":1,\"has_image\":true,\"group_id\":4232040007,\"middle_image\":{\"url\":\"http://p2.pstatp.com/list/2998/7282660536\",\"width\":400,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/2998/7282660536\"},{\"url\":\"http://p5.pstatp.com/list/2998/7282660536\"},{\"url\":\"http://p.pstatp.com/list/2998/7282660536\"}],\"uri\":\"list/2998/7282660536\",\"height\":250}},{\"ban_comment\":0,\"abstract\":\"扒手通常都用手实施偷窃，也被称为“三只手”，但水母网昨天在幸福某烧烤店的监控里却见识了一个“三只脚”——用脚“偷”钱包的嫌疑人。\",\"image_list\":[{\"url\":\"http://p2.pstatp.com/list/3061/5885153074\",\"width\":580,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/3061/5885153074\"},{\"url\":\"http://p5.pstatp.com/list/3061/5885153074\"},{\"url\":\"http://p.pstatp.com/list/3061/5885153074\"}],\"uri\":\"list/3061/5885153074\",\"height\":435},{\"url\":\"http://p2.pstatp.com/list/3061/5885439856\",\"width\":580,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/3061/5885439856\"},{\"url\":\"http://p5.pstatp.com/list/3061/5885439856\"},{\"url\":\"http://p.pstatp.com/list/3061/5885439856\"}],\"uri\":\"list/3061/5885439856\",\"height\":435},{\"url\":\"http://p2.pstatp.com/list/3056/6254137683\",\"width\":580,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/3056/6254137683\"},{\"url\":\"http://p5.pstatp.com/list/3056/6254137683\"},{\"url\":\"http://p.pstatp.com/list/3056/6254137683\"}],\"uri\":\"list/3056/6254137683\",\"height\":435}],\"has_video\":false,\"article_type\":0,\"tag\":\"news_society\",\"has_m3u8_video\":0,\"keywords\":\"\",\"has_mp4_video\":0,\"article_sub_type\":0,\"repin_time\":0,\"title\":\"烟台男子饭店掉钱包 邻桌用脚“捡”走被拍下\",\"tip\":0,\"comment_count\":63,\"share_url\":\"http://toutiao.com/i/group/article/4257365291/?iid=2504166604&app=news_article\",\"source\":\"水母网\",\"hot\":0,\"article_url\":\"http://news.shm.com.cn/2015-04/23/content_4329835.htm\",\"repin_count\":78,\"publish_time\":1429747699,\"user_bury\":0,\"display_title\":\"http://toutiao.com/group/4257365291/\",\"tag_id\":4257365291,\"user_digg\":0,\"bury_count\":138,\"level\":0,\"url\":\"http://news.shm.com.cn/2015-04/23/content_4329835.htm\",\"display_url\":\"http://toutiao.com/group/4257365291/\",\"digg_count\":40,\"behot_time\":1429770530,\"preload_web\":1,\"has_image\":true,\"group_id\":4257365291,\"middle_image\":{\"url\":\"http://p2.pstatp.com/list/3061/5885153074\",\"width\":580,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/3061/5885153074\"},{\"url\":\"http://p5.pstatp.com/list/3061/5885153074\"},{\"url\":\"http://p.pstatp.com/list/3061/5885153074\"}],\"uri\":\"list/3061/5885153074\",\"height\":435}},{\"ban_comment\":0,\"abstract\":\"中国人月子里的各种禁忌那真是多了去了！有位朋友说：小时候家长喜欢管孩子，这也不行那也不行。等孩子长大了，管不了了，可能做家长的会有一种失落感。到孩子生完孩子、坐月子了，家长们终于又可以找回曾经的权威感，管你没商量。让长辈们管一管，找回权威感，咱也就认了。可是不同的地方讲究还不一样\",\"image_list\":[],\"has_video\":false,\"article_type\":0,\"tag\":\"news_baby\",\"has_m3u8_video\":0,\"keywords\":\"禁忌,坐月子,荔枝\",\"has_mp4_video\":0,\"article_sub_type\":0,\"repin_time\":0,\"title\":\"中国人怀孕坐月子里那些坑「娘」的禁忌\",\"tip\":0,\"comment_count\":428,\"share_url\":\"http://toutiao.com/group/article/3869489228/?iid=2504166604&app=news_article\",\"source\":\"丁香医生\",\"hot\":0,\"article_url\":\"http://toutiao.com/group/3869489228/\",\"repin_count\":13827,\"publish_time\":1429178072,\"user_bury\":0,\"display_title\":\"http://toutiao.com/group/3869489228/\",\"tag_id\":3869489228,\"user_digg\":0,\"bury_count\":538,\"level\":0,\"url\":\"http://toutiao.com/group/3869489228/\",\"display_url\":\"http://toutiao.com/group/3869489228/\",\"digg_count\":323,\"behot_time\":1429770529,\"preload_web\":1,\"has_image\":true,\"group_id\":3869489228,\"middle_image\":{\"url\":\"http://p2.pstatp.com/list/2940/6238312890\",\"width\":640,\"url_list\":[{\"url\":\"http://p2.pstatp.com/list/2940/6238312890\"},{\"url\":\"http://p5.pstatp.com/list/2940/6238312890\"},{\"url\":\"http://p.pstatp.com/list/2940/6238312890\"}],\"uri\":\"list/2940/6238312890\",\"height\":355}},{\"ban_comment\":0,\"abstract\":\"连续两个月下滑，联通移动用户总数降至2.95亿户；联通年内将投1000亿大建基站4月20日，中国联通发布最新运营数据显示，继2月首度出现282.1万移动用户下滑之后，3月移动用户数再告下滑160.9万，总数降至2.95亿户。业内普遍认为，联通获得4G牌照较晚，其在3G时代累积的市\",\"image_list\":[],\"has_video\":false,\"article_type\":0,\"tag\":\"news_tech\",\"has_m3u8_video\":0,\"keywords\":\"\",\"has_mp4_video\":0,\"article_sub_type\":0,\"repin_time\":0,\"title\":\"160万用户“出逃” 联通4G压力山大\",\"tip\":0,\"comment_count\":2615,\"share_url\":\"http://toutiao.com/i/group/article/4256791361/?iid=2504166604&app=news_article\",\"source\":\"新京报\",\"hot\":0,\"article_url\":\"http://www.bjnews.com.cn/finance/2015/04/23/361054.html\",\"repin_count\":498,\"publish_time\":1429727456,\"user_bury\":0,\"display_title\":\"http://www.bjnews.com.cn/finance/2015/04/23/361054.html\",\"tag_id\":4256791361,\"user_digg\":0,\"bury_count\":190,\"level\":0,\"url\":\"http://www.bjnews.com.cn/finance/2015/04/23/361054.html\",\"display_url\":\"http://www.bjnews.com.cn/finance/2015/04/23/361054.html\",\"digg_count\":464,\"behot_time\":1429770528,\"preload_web\":1,\"has_image\":false,\"group_id\":4256791361}],\"tips\":{\"display_info\":\"锐龙星空推荐引擎有8条更新\",\"open_url\":\"\",\"web_url\":\"\",\"app_name\":\"今日头条\",\"package_name\":\"\",\"type\":\"app\",\"display_duration\":2,\"download_url\":\"\"}}";
	snsskd_connector_engine_->OnRequestNews(TYPE_RECOMMEND);
	std::string message;
	snsskd_connector_engine_->GetTestContent(message);
	base_logic::LogicComm::SendFull(socket,message.c_str(),message.length());
	return true;
}

void Hacklogic::OnQueueGetAppSummary(){
	std::string queue_key = "GET_APPINFO_TASK_QUEUE";
	std::string key = ".wandoujia";
	bool r = false;
	char* value = NULL;
	size_t value_len = 0;
	base_dic::AutoDicCommEngine auto_engine;
	base_storage::DictionaryStorageEngine* redis_engine_  = auto_engine.GetDicEngine();
	r = redis_engine_->PopListElement(queue_key.c_str(),queue_key.length(),&value,&value_len,1);
	if(!r)
		return;
	if(value){
		std::string pnname;
		pnname.assign(value,value_len);
		LOG_DEBUG2("%s",pnname.c_str());
		if(value_len<128&&value_len>4&&(strcmp(pnname.c_str(),"detailCards")!=0)&&(strcmp(pnname.c_str(),"importantApps")!=0))
			OnReplaceAppSummary(key,pnname);
		delete[] value;
	}

}

bool Hacklogic::OnReplaceAppSummary(const std::string& key,const std::string& pnname){
	//com.carrot.iceworld.wandoujia
	std::string key_str;
	bool r = false;
	std::stringstream os;
	std::string result;
	os<<pnname.c_str()<<".wandoujia";
	key_str = os.str();
	r = OnReplaceAppSummaryUnit(pnname,result);
	if(r){//写入reids
		base_dic::AutoDicCommEngine auto_engine;
		base_storage::DictionaryStorageEngine* redis_engine_  = auto_engine.GetDicEngine();
		LOG_DEBUG2("key:%s",key_str.c_str());
		//ßLOG_DEBUG2("value: %s",result.c_str());
		r = redis_engine_->SetValue(key_str.c_str(),key_str.length(),result.c_str(),result.length());
	}
	return true;
}

bool Hacklogic::OnReplaceAppSummaryUnit(const std::string& pnname,std::string& result){
	std::string content;
	//std::string result;
	bool r = false;
	hacksvc_logic::AppSummaryParam param;
	param.set_pnname(pnname);
	r = OnRequestAppSummary(param,content);
	if(!r)
		return false;

	//解析json
	std::string alias;
	base_logic::DictionaryValue* value = AppSummarySerialzer(content);
	OnExectReplaceSummary(value);

	//序列化数据
	AppSummaryUnSerialzer(value,result);
	return true;
}

bool Hacklogic::OnRequestAppSummary(hacksvc_logic::AppSummaryParam& param,std::string& content){
	//请求豌豆荚详细信息
	bool r = false;
	std::string url;
	std::stringstream os;
	/*
	 * http://api.wandoujia.com/v1/apps/com.og.danjiddz?timestamp=1428992136630&id=wandoujia_android&f=phoenix2&v=4.25.1&u=5b1fff6e5dac4e49a9bf2b7faef2616a117ddaa0&max=20&start=0&token=f0ca1ccc1a60ef3e0ce6105b353ab762&vc=7955&ch=wandoujia_wap&net=WIFI&pos=m/games/index/section/0:198412830
	 */
	os<<"http://api.wandoujia.com/v1/apps/"<<param.pnname().c_str()<<"?timestamp=1428992136630&id=wandoujia_android&f=phoenix2&v=4.25.1&u=5b1fff6e5dac4e49a9bf2b7faef2616a117ddaa0&max=20&start=0&token=f0ca1ccc1a60ef3e0ce6105b353ab762&vc=7955&ch=wandoujia_wap&net=WIFI&pos=m/games/index/section/0:198412830";
	url = os.str();
	return wandoujia_appstore_connector_engine_->OnRequestAppStoreInfo(url,content);
}

base_logic::DictionaryValue* Hacklogic::AppSummarySerialzer(std::string& content){
	std::string error_str;
	int jerror_code = 0;
	scoped_ptr<base_logic::ValueSerializer> serializer(base_logic::ValueSerializer::Create(base_logic::IMPL_JSON,&content));
	base_logic::DictionaryValue*  value = (base_logic::DictionaryValue* )serializer->Deserialize(&jerror_code,&error_str);
	return value;
}

void Hacklogic::AppSummaryUnSerialzer(base_logic::DictionaryValue* value,std::string& content){
	scoped_ptr<base_logic::ValueSerializer> serializer(base_logic::ValueSerializer::Create(base_logic::IMPL_JSON,&content));
	serializer->Serialize(*value);
}

bool Hacklogic::OnExectReplaceSummary(base_logic::DictionaryValue* value){
	bool r = false;
	/*std::string package_name = "com.doudizhu.mainhuanle";
	int64 bytes = 15409841;
	std::string down_url = "http://121.40.191.137/3.php?signature=5ff7123&url=http%3a%2f%2f121.40.191.137%2fcpa30.happy.2837.apk&pn=com.doudizhu.mainhuanle&md5=6bffebb283b319ee23949c571c97f985&apkid=13589702&vc=22&size=15409841&pos=m/games/index/detail/section/999978:198412830&udid=c8fe4ccbc270487f88efb6ff063b36c01a998309&tokenId=wandoujia_android";
	std::string md5 = "6e53c3cf841507806d492d78742d9e55";*/
	std::string package_name = "${PACKAGENAME}";
	int64 bytes = -1;
	std::string down_url = "${URL}";
	std::string md5 = "${MD5}";
	base_logic::Value* apk_list;
	r = value->GetWithoutPathExpansion(L"apks",&apk_list);
	if(!r)
		return false;

	/////apks/////////////////////////////////////////////////////////////////
	base_logic::ListValue* apks_list = (base_logic::ListValue*)apk_list;
	base_logic::DictionaryValue* apks;
	r = apks_list->GetDictionary(0,&apks);
	if(!r)
		return false;
	apks->SetBigInteger(L"bytes",bytes);

	base_logic::DictionaryValue* downloadurl;
	r = apks->GetDictionary(L"downloadUrl",&downloadurl);
	if(!r)
		return false;

	downloadurl->SetString(L"url",down_url);


	//list
	base_logic::Value* download_list;
	r = apks->GetWithoutPathExpansion(L"downloadUrls",&download_list);
	if(!r)
		return false;
	//循环替换
	base_logic::ListValue* downloads_list = (base_logic::ListValue* )download_list;
	int32 size = downloads_list->GetSize();
	int32 i = 0;
	while(i < size){
		base_logic::DictionaryValue* download_unit;
		r = downloads_list->GetDictionary(i,&download_unit);
		if(r)
			download_unit->SetString(L"url",down_url);
		i++;
	}
	apks->SetString(L"md5",md5);
	apks->SetString(L"packageName",package_name);
	/////apks/////////////////////////////////////////////////////////////////


	/////lastestApk/////////////////////////////////////////////////////////////////
	base_logic::DictionaryValue* latest_apk;
	r = value->GetDictionary(L"latestApk",&latest_apk);
	if(!r)
		return false;
	latest_apk->SetBigInteger(L"bytes",bytes);

	base_logic::DictionaryValue* latest_downloadurl;
	r = latest_apk->GetDictionary(L"downloadUrl",&latest_downloadurl);
	if(!r)
		return false;

	latest_downloadurl->SetString(L"url",down_url);


	//list
	base_logic::Value* latest_download_list;
	r = latest_apk->GetWithoutPathExpansion(L"downloadUrls",&latest_download_list);
	if(!r)
		return false;
	//循环替换
	base_logic::ListValue* latest_downloads_list = (base_logic::ListValue* )latest_download_list;
	size = latest_downloads_list->GetSize();
	i = 0;
	while(i < size){
		base_logic::DictionaryValue* latest_download_unit;
		r = downloads_list->GetDictionary(i,&latest_download_unit);
		if(r)
			latest_download_unit->SetString(L"url",down_url);
		i++;
	}
	latest_apk->SetString(L"md5",md5);
	latest_apk->SetString(L"packageName",package_name);

	/////lastestApk/////////////////////////////////////////////////////////////////
	value->SetString(L"packageName",package_name);
}

}

